<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Robin Genuer &amp; Boris Hejblum">
<meta name="dcterms.date" content="2024-06-06">
<title>SAVOR: Part III</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="SAVOR_practical3_files/libs/clipboard/clipboard.min.js"></script>
<script src="SAVOR_practical3_files/libs/quarto-html/quarto.js"></script>
<script src="SAVOR_practical3_files/libs/quarto-html/popper.min.js"></script>
<script src="SAVOR_practical3_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="SAVOR_practical3_files/libs/quarto-html/anchor.min.js"></script>
<link href="SAVOR_practical3_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="SAVOR_practical3_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="SAVOR_practical3_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="SAVOR_practical3_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="SAVOR_practical3_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
</head>
<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#objectifs" id="toc-objectifs" class="nav-link active" data-scroll-target="#objectifs">Objectifs</a></li>
  <li>
<a href="#introduction-%C3%A0-dplyr" id="toc-introduction-à-dplyr" class="nav-link" data-scroll-target="#introduction-%C3%A0-dplyr">Introduction à <code>dplyr</code></a>
  <ul class="collapse">
<li>
<a href="#gestion-de-fichiers-de-donn%C3%A9es" id="toc-gestion-de-fichiers-de-données" class="nav-link" data-scroll-target="#gestion-de-fichiers-de-donn%C3%A9es">Gestion de fichiers de données</a>
  <ul class="collapse">
<li><a href="#importation" id="toc-importation" class="nav-link" data-scroll-target="#importation">Importation</a></li>
  <li><a href="#exportation" id="toc-exportation" class="nav-link" data-scroll-target="#exportation">Exportation</a></li>
  <li><a href="#sauvegarde" id="toc-sauvegarde" class="nav-link" data-scroll-target="#sauvegarde">Sauvegarde</a></li>
  </ul>
</li>
  <li>
<a href="#op%C3%A9rations-sur-les-tableaux-de-donn%C3%A9es" id="toc-opérations-sur-les-tableaux-de-données" class="nav-link" data-scroll-target="#op%C3%A9rations-sur-les-tableaux-de-donn%C3%A9es">Opérations sur les tableaux de données</a>
  <ul class="collapse">
<li><a href="#s%C3%A9lection-suppression-ajout" id="toc-sélection-suppression-ajout" class="nav-link" data-scroll-target="#s%C3%A9lection-suppression-ajout">Sélection, suppression, ajout</a></li>
  <li><a href="#fusion" id="toc-fusion" class="nav-link" data-scroll-target="#fusion">Fusion</a></li>
  <li><a href="#trier-un-tableau-de-donn%C3%A9es-le-long-dune-colonne" id="toc-trier-un-tableau-de-données-le-long-dune-colonne" class="nav-link" data-scroll-target="#trier-un-tableau-de-donn%C3%A9es-le-long-dune-colonne">Trier un tableau de données le long d’une colonne</a></li>
  <li><a href="#la-classe-tlb" id="toc-la-classe-tlb" class="nav-link" data-scroll-target="#la-classe-tlb">La classe <code>tlb</code></a></li>
  </ul>
</li>
  </ul>
</li>
  <li><a href="#introduction-au-pipe" id="toc-introduction-au-pipe" class="nav-link" data-scroll-target="#introduction-au-pipe">Introduction au pipe <code>%&gt;%</code></a></li>
  <li><a href="#r%C3%A9sum%C3%A9" id="toc-résumé" class="nav-link" data-scroll-target="#r%C3%A9sum%C3%A9">Résumé</a></li>
  </ul></nav>
</div>
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">SAVOR: Part III</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
<p class="subtitle lead"><code>dplyr</code> and <code>%&gt;%</code></p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Robin Genuer &amp; Boris Hejblum </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 6, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header><section id="objectifs" class="level1"><h1>Objectifs</h1>
<p>Ce document donne tout d’abord quelques considérations sur l’importation de données et sur les strucutres de bases de R, avant de donner quelques éléments introductifs sur l’utilisation du package <code>dplyr</code>.</p>
</section><section id="introduction-à-dplyr" class="level1"><h1>Introduction à <code>dplyr</code>
</h1>
<p>Il existe un très grand nombre de packages additionnels dans <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg>. Certains apportent de nouvelles fonctionnalités (méthodes statistiques qui n’étaient pas disponible auparavant), et d’autres apportent des améliorations à des fonctionnalités déjà présentes dans <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg>.</p>
<p>Le package <code>dplyr</code> rentre essentiellement dans la 2<sup>ème</sup> catégorie. Il propose de re-définir la manipulation de données dans R, avec une syntaxe plus simple, tout en améliorant les performances lorsqu’on gère des grands tableaux de données.</p>
<p>Installer le package <code>dplyr</code> puis le charger :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># install.packages('dplyr')</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="gestion-de-fichiers-de-données" class="level2"><h2 class="anchored" data-anchor-id="gestion-de-fichiers-de-données">Gestion de fichiers de données</h2>
<p>Avant de se lancer dans l’utilisation de <code>dplyr</code>, nous allons revoir quelques principes dans la gestion des fichiers de données sous <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg>.</p>
<section id="importation" class="level3"><h3 class="anchored" data-anchor-id="importation">Importation</h3>
<p>Le plus simple pour importer des données est d’utiliser l’outil graphique de Rstudio “Import Dataset”, présent dans l’onglet “Environnement” ou dans le menu “File”.</p>
<p>Sinon, on peut bien entendu utiliser la fonction <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> et ses dérivées (<code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code>, <code><a href="https://rdrr.io/r/utils/read.table.html">read.delim()</a></code>…).</p>
<p>Importer le fichier <code>naissance.txt</code>, puis regarder la structure du tableau créé via la fonction <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code>.</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.delim</a></span><span class="op">(</span><span class="st">"naissance.txt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  10 variables:
 $ ID   : int  85 86 87 88 89 91 92 93 94 95 ...
 $ AGE  : int  19 33 20 21 18 21 22 17 29 26 ...
 $ LWT  : int  182 155 105 108 107 124 118 103 123 113 ...
 $ RACE : int  2 3 1 1 1 3 1 3 1 1 ...
 $ SMOKE: int  0 0 1 1 1 0 0 0 1 1 ...
 $ PTL  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ HT   : int  0 0 0 0 0 0 0 0 0 0 ...
 $ UI   : int  1 0 0 1 1 0 0 0 0 0 ...
 $ FVT  : int  0 3 1 2 0 0 1 1 1 0 ...
 $ BWT  : int  2523 2551 2557 2594 2600 2622 2637 2637 2663 2665 ...</code></pre>
</div>
</div>
<p><svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> considère toutes les variables comme des suite de nombres entiers (car effectivement il n’y a pas de nombres à virgule), ce qui est correcte pour les variables quantitatives (comme l’âge ou encore le poids de l’enfant <code>BWT</code>). Par contre, certaines variables sont qualitatives (comme <code>SMOKE</code>), donc si on veut des facteurs, il faut le forcer.</p>
<p>Transformer la variable <code>SMOKE</code> en facteur, et renommer les niveaux en “Non-Fumeur” (0 dans le fichier txt) et “Fumeur” (1 dans le fichier txt).</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance</span><span class="op">$</span><span class="va">SMOKE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">$</span><span class="va">SMOKE</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Non-Fumeur"</span>, <span class="st">"Fumeur"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  10 variables:
 $ ID   : int  85 86 87 88 89 91 92 93 94 95 ...
 $ AGE  : int  19 33 20 21 18 21 22 17 29 26 ...
 $ LWT  : int  182 155 105 108 107 124 118 103 123 113 ...
 $ RACE : int  2 3 1 1 1 3 1 3 1 1 ...
 $ SMOKE: Factor w/ 2 levels "Non-Fumeur","Fumeur": 1 1 2 2 2 1 1 1 2 2 ...
 $ PTL  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ HT   : int  0 0 0 0 0 0 0 0 0 0 ...
 $ UI   : int  1 0 0 1 1 0 0 0 0 0 ...
 $ FVT  : int  0 3 1 2 0 0 1 1 1 0 ...
 $ BWT  : int  2523 2551 2557 2594 2600 2622 2637 2637 2663 2665 ...</code></pre>
</div>
</div>
<section id="exercice-0" class="level4"><h4 class="anchored" data-anchor-id="exercice-0">Exercice 0 :</h4>
<ol type="1">
<li>Charger le fichier de données nommé <code>naissance_na.txt</code>.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance_na</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span><span class="st">"naissance_na.txt"</span>, sep <span class="op">=</span> <span class="st">";"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ol start="2" type="1">
<li>Consulter la structure de l’objet créé (par exemple nommé <code>naissance_na</code>). Que remarquez-vous pour la variable <code>LWT</code> ?</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance_na</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  10 variables:
 $ ID   : int  85 86 87 88 89 91 92 93 94 95 ...
 $ AGE  : int  19 33 20 21 18 21 22 17 29 26 ...
 $ LWT  : chr  "." "155" "105" "108" ...
 $ RACE : int  2 3 1 1 1 3 1 3 1 1 ...
 $ SMOKE: int  0 0 1 1 1 0 0 0 1 1 ...
 $ PTL  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ HT   : int  0 0 0 0 0 0 0 0 0 0 ...
 $ UI   : int  1 0 0 1 1 0 0 0 0 0 ...
 $ FVT  : int  0 3 1 2 0 0 1 1 1 0 ...
 $ BWT  : int  2523 2551 2557 2594 2600 2622 2637 2637 2663 2665 ...</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Pour régler le problème, modifier le contenu de la case “NA.strings” lors du chargement du fichier de données avec “Import Dataset” (ou modifier le paramètre <code>na.strings</code> de la fonction <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> ou de ses dérivées). Puis vérifier la nouvelle structure de l’objet.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance_na</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span><span class="st">"naissance_na.txt"</span>, sep <span class="op">=</span> <span class="st">";"</span>, na.strings <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance_na</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  10 variables:
 $ ID   : int  85 86 87 88 89 91 92 93 94 95 ...
 $ AGE  : int  19 33 20 21 18 21 22 17 29 26 ...
 $ LWT  : int  NA 155 105 108 107 124 118 103 123 113 ...
 $ RACE : int  2 3 1 1 1 3 1 3 1 1 ...
 $ SMOKE: int  0 0 1 1 1 0 0 0 1 1 ...
 $ PTL  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ HT   : int  0 0 0 0 0 0 0 0 0 0 ...
 $ UI   : int  1 0 0 1 1 0 0 0 0 0 ...
 $ FVT  : int  0 3 1 2 0 0 1 1 1 0 ...
 $ BWT  : int  2523 2551 2557 2594 2600 2622 2637 2637 2663 2665 ...</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>A l’aide de la fonction <code><a href="https://rdrr.io/r/base/transform.html">transform()</a></code>, transformer en facteur les variables <code>RACE</code> (1=blanche, 2=noire, 3=autres), <code>HT</code> (0=non, 1=oui) et <code>UI</code> (0=non, 1=oui) en une seule commande.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance_na</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html">transform</a></span><span class="op">(</span><span class="va">naissance_na</span>,</span>
<span>    RACE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">RACE</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"blanche"</span>, <span class="st">"noire"</span>, <span class="st">"autres"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    HT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">HT</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"non"</span>, <span class="st">"oui"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    UI <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">UI</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"non"</span>, <span class="st">"oui"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance_na</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  10 variables:
 $ ID   : int  85 86 87 88 89 91 92 93 94 95 ...
 $ AGE  : int  19 33 20 21 18 21 22 17 29 26 ...
 $ LWT  : int  NA 155 105 108 107 124 118 103 123 113 ...
 $ RACE : Factor w/ 3 levels "blanche","noire",..: 2 3 1 1 1 3 1 3 1 1 ...
 $ SMOKE: int  0 0 1 1 1 0 0 0 1 1 ...
 $ PTL  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ HT   : Factor w/ 2 levels "non","oui": 1 1 1 1 1 1 1 1 1 1 ...
 $ UI   : Factor w/ 2 levels "non","oui": 2 1 1 2 2 1 1 1 1 1 ...
 $ FVT  : int  0 3 1 2 0 0 1 1 1 0 ...
 $ BWT  : int  2523 2551 2557 2594 2600 2622 2637 2637 2663 2665 ...</code></pre>
</div>
</div>
<ol start="5" type="1">
<li>
<p>Toujours à l’aide de la fonction <code><a href="https://rdrr.io/r/base/transform.html">transform()</a></code>, créer deux nouvelles variables (utiliser deux commandes différentes, puis essayer en une seule fois) :</p>
<ul>
<li><p><code>POIDS</code>, contenant le poids de la mère en g (1 livre = 453 g).</p></li>
<li><p><code>RAPPORT</code>, contenant le rapport entre le poids de l’enfant et celui de la mère (en grammes tous les deux).</p></li>
</ul>
</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance_na</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html">transform</a></span><span class="op">(</span><span class="va">naissance_na</span>, POIDS <span class="op">=</span> <span class="va">LWT</span> <span class="op">*</span> <span class="fl">453</span>, RAPPORT <span class="op">=</span> <span class="va">BWT</span><span class="op">/</span><span class="va">POIDS</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-error">
<pre><code>Error in eval(substitute(list(...)), `_data`, parent.frame()): object 'POIDS' not found</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance_na</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html">transform</a></span><span class="op">(</span><span class="va">naissance_na</span>, POIDS <span class="op">=</span> <span class="va">LWT</span> <span class="op">*</span> <span class="fl">453</span><span class="op">)</span></span>
<span><span class="va">naissance_na</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html">transform</a></span><span class="op">(</span><span class="va">naissance_na</span>, RAPPORT <span class="op">=</span> <span class="va">BWT</span><span class="op">/</span><span class="va">POIDS</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance_na</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  12 variables:
 $ ID     : int  85 86 87 88 89 91 92 93 94 95 ...
 $ AGE    : int  19 33 20 21 18 21 22 17 29 26 ...
 $ LWT    : int  NA 155 105 108 107 124 118 103 123 113 ...
 $ RACE   : Factor w/ 3 levels "blanche","noire",..: 2 3 1 1 1 3 1 3 1 1 ...
 $ SMOKE  : int  0 0 1 1 1 0 0 0 1 1 ...
 $ PTL    : int  0 0 0 0 0 0 0 0 0 0 ...
 $ HT     : Factor w/ 2 levels "non","oui": 1 1 1 1 1 1 1 1 1 1 ...
 $ UI     : Factor w/ 2 levels "non","oui": 2 1 1 2 2 1 1 1 1 1 ...
 $ FVT    : int  0 3 1 2 0 0 1 1 1 0 ...
 $ BWT    : int  2523 2551 2557 2594 2600 2622 2637 2637 2663 2665 ...
 $ POIDS  : num  NA 70215 47565 48924 48471 ...
 $ RAPPORT: num  NA 0.0363 0.0538 0.053 0.0536 ...</code></pre>
</div>
</div>
<ol start="6" type="1">
<li>Utiliser la fonction <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">dplyr::mutate()</a></code> (du package <code>dplyr</code>) pour répondre à la question précédente en une seule commande.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance_na</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">naissance_na</span>, POIDS2 <span class="op">=</span> <span class="va">LWT</span> <span class="op">*</span> <span class="fl">453</span>, RAPPORT2 <span class="op">=</span> <span class="va">BWT</span><span class="op">/</span><span class="va">POIDS2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance_na</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  14 variables:
 $ ID      : int  85 86 87 88 89 91 92 93 94 95 ...
 $ AGE     : int  19 33 20 21 18 21 22 17 29 26 ...
 $ LWT     : int  NA 155 105 108 107 124 118 103 123 113 ...
 $ RACE    : Factor w/ 3 levels "blanche","noire",..: 2 3 1 1 1 3 1 3 1 1 ...
 $ SMOKE   : int  0 0 1 1 1 0 0 0 1 1 ...
 $ PTL     : int  0 0 0 0 0 0 0 0 0 0 ...
 $ HT      : Factor w/ 2 levels "non","oui": 1 1 1 1 1 1 1 1 1 1 ...
 $ UI      : Factor w/ 2 levels "non","oui": 2 1 1 2 2 1 1 1 1 1 ...
 $ FVT     : int  0 3 1 2 0 0 1 1 1 0 ...
 $ BWT     : int  2523 2551 2557 2594 2600 2622 2637 2637 2663 2665 ...
 $ POIDS   : num  NA 70215 47565 48924 48471 ...
 $ RAPPORT : num  NA 0.0363 0.0538 0.053 0.0536 ...
 $ POIDS2  : num  NA 70215 47565 48924 48471 ...
 $ RAPPORT2: num  NA 0.0363 0.0538 0.053 0.0536 ...</code></pre>
</div>
</div>
</section></section><section id="exportation" class="level3"><h3 class="anchored" data-anchor-id="exportation">Exportation</h3>
<p>Pour écrire une table de données, on utilise la fonction <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code> ou ses dérivées.</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mon_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Partie <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Intro"</span>, <span class="st">"Bases"</span>, <span class="st">"Manip"</span><span class="op">)</span>, Temps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">mon_df</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  Partie Temps
1  Intro   0.5
2  Bases   1.5
3  Manip   1.5</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">mon_df</span>, file <span class="op">=</span> <span class="st">"mon_df.csv"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="sauvegarde" class="level3"><h3 class="anchored" data-anchor-id="sauvegarde">Sauvegarde</h3>
<p>On peut aussi sauvegarder une table au format <code>Rdata</code> (qui est un format propre à R). Pour cela on utilise <code><a href="https://rdrr.io/r/base/save.html">save()</a></code> :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">naissance</span>, file <span class="op">=</span> <span class="st">"naissance.Rdata"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>L’avantage est que lorsqu’on recharge le fichier avec la fonction <code><a href="https://rdrr.io/r/base/load.html">load()</a></code>, il garde la bonne structure :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"naissance.Rdata"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  10 variables:
 $ ID   : int  85 86 87 88 89 91 92 93 94 95 ...
 $ AGE  : int  19 33 20 21 18 21 22 17 29 26 ...
 $ LWT  : int  182 155 105 108 107 124 118 103 123 113 ...
 $ RACE : int  2 3 1 1 1 3 1 3 1 1 ...
 $ SMOKE: Factor w/ 2 levels "Non-Fumeur","Fumeur": 1 1 2 2 2 1 1 1 2 2 ...
 $ PTL  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ HT   : int  0 0 0 0 0 0 0 0 0 0 ...
 $ UI   : int  1 0 0 1 1 0 0 0 0 0 ...
 $ FVT  : int  0 3 1 2 0 0 1 1 1 0 ...
 $ BWT  : int  2523 2551 2557 2594 2600 2622 2637 2637 2663 2665 ...</code></pre>
</div>
</div>
<p>On remarque qu’on a pas besoin d’affecter le résultat de <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> à un objet. Ceci est dû au fait, qu’on peut sauvegarder plusieurs objets de la session dans un même fichier <code>.Rdata</code>. Et on pourra tous les recharger ensuite :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="va">mon_df</span>, file <span class="op">=</span> <span class="st">"naissance_mon_df.Rdata"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="va">mon_df</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">mon_df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'mon_df' not found</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"naissance_mon_df.Rdata"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">mon_df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
</div>
<p>Ce comportement est pratique, mais peut parfois s’avérer trompeur. Si on a beaucoup d’objets dans notre environnement, et qu’on charge un objet <code>.Rdata</code> avec plusieurs objets (dont on ne se souvient pas, ou dont on ne connaît pas le nom), il est difficile de s’y retrouver. De plus, lors du chargement, <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> peut écraser des objets déjà présents avec le même nom.</p>
<p><strong>Conseil</strong> : mettre tout ce qu’on veut sauver dans une liste, et sauver cette liste sous format <code>.Rdata</code> en gardant le même nom :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance_mon_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>naissance <span class="op">=</span> <span class="va">naissance</span>, mon_df <span class="op">=</span> <span class="va">mon_df</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">naissance_mon_df</span>, file <span class="op">=</span> <span class="st">"naissance_mon_df.Rdata"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">naissance_mon_df</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"naissance_mon_df.Rdata"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="opérations-sur-les-tableaux-de-données" class="level2"><h2 class="anchored" data-anchor-id="opérations-sur-les-tableaux-de-données">Opérations sur les tableaux de données</h2>
<section id="sélection-suppression-ajout" class="level3"><h3 class="anchored" data-anchor-id="sélection-suppression-ajout">Sélection, suppression, ajout</h3>
<section id="exercice-1-sélection-de-colonnes" class="level4"><h4 class="anchored" data-anchor-id="exercice-1-sélection-de-colonnes">Exercice 1 : Sélection de colonnes</h4>
<ol type="1">
<li>J’ai dénombré 10 façons de sélectionner la variable <code>AGE</code>. En gardant en tête qu’un <code>data.frame</code> est une liste de colonnes, essayer d’en trouver un maximum.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Pour sélectionner une colonne, on peut utiliser l'aspect 'liste' du</span></span>
<span><span class="co"># `data.frame`, avec le `$`</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">$</span><span class="va">AGE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> int [1:189] 19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">$</span><span class="va">AGE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Le `$` extrait la composante de la liste `naissance` nommée `AGE`.</span></span>
<span></span>
<span><span class="co"># Toujours côté 'liste', on peut également utiliser le `[[]]`, qui exécute la</span></span>
<span><span class="co"># même opération, et qui peut s'utiliser avec le numéro de la variable à la</span></span>
<span><span class="co"># place du nom :</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> int [1:189] 19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">[[</span><span class="st">"AGE"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> int [1:189] 19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Dernière façon 'liste', utiliser le `[]`, car une liste est un vecteur :</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  1 variable:
 $ AGE: int  19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">[</span><span class="st">"AGE"</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  1 variable:
 $ AGE: int  19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Nous voyons, que contrairement à avant où nous avions extrait un vecteur,</span></span>
<span><span class="co"># nous avons ici extrait un sous-dataframe (ou encore une sous-liste). Ce</span></span>
<span><span class="co"># dernier point est important à garder en tête, car il peut être source de</span></span>
<span><span class="co"># nombreux bugs...</span></span>
<span></span>
<span><span class="co"># On peut aussi utiliser le côté 'matrice' du dataframe, avec le `[,]` :</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> int [1:189] 19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">[</span>, <span class="st">"AGE"</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> int [1:189] 19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Ici nous avons extrait la colonne numéro 2 de la 'matrice'. Par contre, **ce</span></span>
<span><span class="co"># n'est plus un dataframe !**</span></span>
<span></span>
<span><span class="co"># Si on souhaite garder la structure de dataframe, il faut rajouter l'option</span></span>
<span><span class="co"># `drop = FALSE` :</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">[</span>, <span class="fl">2</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  1 variable:
 $ AGE: int  19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#!!! ATTENTION : Ce comportement est connu comme étant une source d'erreurs fréquente dans R quand on programme ses propres fonctions !!!**</span></span>
<span></span>
<span><span class="co"># Sinon, on peut utiliser la fonction `subset()` :</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">naissance</span>, select <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  1 variable:
 $ AGE: int  19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">naissance</span>, select <span class="op">=</span> <span class="st">"AGE"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  1 variable:
 $ AGE: int  19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">naissance</span>, select <span class="op">=</span> <span class="va">AGE</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  1 variable:
 $ AGE: int  19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Utiliser la fonction <code>select</code> du package <code>dplyr</code> pour sélectionner la variable <code>AGE</code> et regarder comment elle se comporte.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  1 variable:
 $ AGE: int  19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="va">AGE</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   189 obs. of  1 variable:
 $ AGE: int  19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
</div>
</section><section id="exercice-2-sélection-de-plusieurs-colonnes" class="level4"><h4 class="anchored" data-anchor-id="exercice-2-sélection-de-plusieurs-colonnes">Exercice 2 : Sélection de plusieurs colonnes</h4>
<p>Essayer tous les commandes précédentes pour extraire, en même temps, les 4 colonnes <code>ID</code>, <code>AGE</code>, <code>LWT</code> et <code>SMOKE</code>.</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># naissance$c('ID', 'AGE', 'LWT', 'SMOKE') naissance[[c(1:3, 5)]]</span></span>
<span><span class="co"># naissance[[c('ID', 'AGE', 'LWT', 'SMOKE')]]</span></span>
<span><span class="va">naissance</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">naissance</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"AGE"</span>, <span class="st">"LWT"</span>, <span class="st">"SMOKE"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">naissance</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">naissance</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"AGE"</span>, <span class="st">"LWT"</span>, <span class="st">"SMOKE"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">naissance</span>, select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">naissance</span>, select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"AGE"</span>, <span class="st">"LWT"</span>, <span class="st">"SMOKE"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">naissance</span>, select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">ID</span>, <span class="va">AGE</span>, <span class="va">LWT</span>, <span class="va">SMOKE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="va">ID</span>, <span class="va">AGE</span>, <span class="va">LWT</span>, <span class="va">SMOKE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="exercice-3-sélection-de-lignes" class="level4"><h4 class="anchored" data-anchor-id="exercice-3-sélection-de-lignes">Exercice 3 : Sélection de lignes</h4>
<p>Sélectionner les 5 premières lignes, puis les 5 dernières lignes (en 2 commandes) en utilisant une commande de base puis la fonction <code><a href="https://dplyr.tidyverse.org/reference/slice.html">dplyr::slice()</a></code>. Afficher le résultat dans une <em>jolie</em> table grâce à la fonction <code>kable()</code>du package <code>knitr</code>.</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># En ce qui concerne les lignes, nous sommes obligés de considérer l'aspect</span></span>
<span><span class="co"># 'matrice' du dataframe :</span></span>
<span><span class="va">premiers</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span></span>
<span><span class="va">derniers</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span><span class="op">(</span><span class="va">n</span> <span class="op">-</span> <span class="fl">5</span><span class="op">)</span><span class="op">:</span><span class="va">n</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Avec la fonction `dplyr::slice()` :</span></span>
<span><span class="va">prems</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">derns</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">5</span><span class="op">)</span><span class="op">:</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span> <span class="op">-</span> <span class="fl">4</span><span class="op">:</span><span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">ID</th>
<th style="text-align: right;">AGE</th>
<th style="text-align: right;">LWT</th>
<th style="text-align: right;">RACE</th>
<th style="text-align: left;">SMOKE</th>
<th style="text-align: right;">PTL</th>
<th style="text-align: right;">HT</th>
<th style="text-align: right;">UI</th>
<th style="text-align: right;">FVT</th>
<th style="text-align: right;">BWT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">85</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">182</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2523</td>
</tr>
<tr class="even">
<td style="text-align: right;">86</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">155</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2551</td>
</tr>
<tr class="odd">
<td style="text-align: right;">87</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2557</td>
</tr>
<tr class="even">
<td style="text-align: right;">88</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">108</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2594</td>
</tr>
<tr class="odd">
<td style="text-align: right;">89</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">107</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2600</td>
</tr>
<tr class="even">
<td style="text-align: right;">79</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2466</td>
</tr>
<tr class="odd">
<td style="text-align: right;">81</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2495</td>
</tr>
<tr class="even">
<td style="text-align: right;">82</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">94</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2495</td>
</tr>
<tr class="odd">
<td style="text-align: right;">83</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">142</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2495</td>
</tr>
<tr class="even">
<td style="text-align: right;">84</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">130</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2495</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section id="exercice-4-filtre" class="level4"><h4 class="anchored" data-anchor-id="exercice-4-filtre">Exercice 4 : Filtre</h4>
<ol type="1">
<li>Construire un sous-dataframe ne contenant que les individus fumeurs, en utilisant <code>[,]</code>, puis <code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code>, et enfin <code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter()</a></code>.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">fum</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span><span class="va">naissance</span><span class="op">$</span><span class="va">SMOKE</span> <span class="op">==</span> <span class="st">"Fumeur"</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">fum</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   74 obs. of  10 variables:
 $ ID   : int  87 88 89 94 95 100 101 103 105 113 ...
 $ AGE  : int  20 21 18 29 26 18 18 25 28 17 ...
 $ LWT  : int  105 108 107 123 113 100 100 118 120 122 ...
 $ RACE : int  1 1 1 1 1 1 1 1 1 1 ...
 $ SMOKE: Factor w/ 2 levels "Non-Fumeur","Fumeur": 2 2 2 2 2 2 2 2 2 2 ...
 $ PTL  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ HT   : int  0 0 0 0 0 0 0 0 0 0 ...
 $ UI   : int  0 1 1 0 0 0 0 0 0 0 ...
 $ FVT  : int  1 2 0 1 0 0 0 3 1 0 ...
 $ BWT  : int  2557 2594 2600 2663 2665 2769 2769 2782 2821 2906 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">fum</span><span class="op">$</span><span class="va">SMOKE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Non-Fumeur     Fumeur 
         0         74 </code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># La table `fum` ne contient que les individus fumeurs. On peut aussi utiliser</span></span>
<span><span class="co"># la fonction `which()`, qui renvoie les indices des individus qui vérifient la</span></span>
<span><span class="co"># condition :</span></span>
<span><span class="va">ind_fum</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">$</span><span class="va">SMOKE</span> <span class="op">==</span> <span class="st">"Fumeur"</span><span class="op">)</span></span>
<span><span class="va">ind_fum</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> [1]   3   4   5   9  10  15  16  18  20  27  29  32  33  36  37  38  39  40  41
[20]  45  46  50  53  54  57  65  68  71  72  73  75  78  79  86  93  94  95  98
[39]  99 102 109 113 115 128 131 133 140 141 142 145 146 148 153 154 156 157 158
[58] 160 161 165 166 169 171 172 173 176 177 178 179 183 184 185 187 189</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">fum2</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span><span class="va">ind_fum</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">fum2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   74 obs. of  10 variables:
 $ ID   : int  87 88 89 94 95 100 101 103 105 113 ...
 $ AGE  : int  20 21 18 29 26 18 18 25 28 17 ...
 $ LWT  : int  105 108 107 123 113 100 100 118 120 122 ...
 $ RACE : int  1 1 1 1 1 1 1 1 1 1 ...
 $ SMOKE: Factor w/ 2 levels "Non-Fumeur","Fumeur": 2 2 2 2 2 2 2 2 2 2 ...
 $ PTL  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ HT   : int  0 0 0 0 0 0 0 0 0 0 ...
 $ UI   : int  0 1 1 0 0 0 0 0 0 0 ...
 $ FVT  : int  1 2 0 1 0 0 0 3 1 0 ...
 $ BWT  : int  2557 2594 2600 2663 2665 2769 2769 2782 2821 2906 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Avec `subset()`</span></span>
<span><span class="va">fum_sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="va">SMOKE</span> <span class="op">==</span> <span class="st">"Fumeur"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Avec `dplyr::filter()` :</span></span>
<span><span class="va">fum_fil</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="va">SMOKE</span> <span class="op">==</span> <span class="st">"Fumeur"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Les deux syntaxes ici sont identiques. La différence est que dans dplyr il y</span></span>
<span><span class="co"># a deux fonctions (`select()` et `filter()`) avec une syntaxe très simple.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ol start="2" type="1">
<li>Donner les identifiants (colonne <code>ID</code>) des individus des individus présentant de l’hypertension (variable <code>HT</code> valant 1).</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="va">HT</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span>, <span class="st">"ID"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>    ID
1   98
2  138
3  187
4  197
5  202
6   11
7   13
8   19
9   20
10  75
11  83
12  84</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb73"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># avec le pipe :</span></span>
<span><span class="va">naissance</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">HT</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="st">"ID"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>    ID
1   98
2  138
3  187
4  197
5  202
6   11
7   13
8   19
9   20
10  75
11  83
12  84</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Sélectionner le sous-dataframe ne contenant que les individus fumeurs et âgés de moins de 20 ans.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb75"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="va">SMOKE</span> <span class="op">==</span> <span class="st">"Fumeur"</span>, <span class="va">AGE</span> <span class="op">&lt;</span> <span class="fl">20</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>    ID AGE LWT RACE  SMOKE PTL HT UI FVT  BWT
1   89  18 107    1 Fumeur   0  0  1   0 2600
2  100  18 100    1 Fumeur   0  0  0   0 2769
3  101  18 100    1 Fumeur   0  0  0   0 2769
4  113  17 122    1 Fumeur   0  0  0   0 2906
5  124  19 138    1 Fumeur   0  0  0   2 2977
6  132  18  90    1 Fumeur   0  0  1   0 3076
7  133  18  90    1 Fumeur   0  0  1   0 3076
8  167  16 135    1 Fumeur   0  0  0   0 3374
9  180  17 120    3 Fumeur   0  0  0   0 3572
10 187  19 235    1 Fumeur   0  1  0   0 3629
11 189  16 135    1 Fumeur   0  0  0   0 3643
12 192  19 147    1 Fumeur   0  0  0   0 3651
13 193  19 147    1 Fumeur   0  0  0   0 3651
14 197  19 184    1 Fumeur   0  1  0   0 3756
15 205  18 120    1 Fumeur   0  0  0   2 3856
16 224  19 120    1 Fumeur   0  0  0   0 4238
17  23  19  91    1 Fumeur   2  0  1   0 1885
18  34  19 112    1 Fumeur   0  0  1   0 2084
19  37  17 130    3 Fumeur   1  0  1   0 2125
20  45  17 110    1 Fumeur   0  0  0   0 2225
21  50  18 110    2 Fumeur   1  0  0   0 2296
22  68  17 120    1 Fumeur   0  0  0   3 2414
23  78  14 101    3 Fumeur   1  0  0   0 2466</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Donner les indices des individus ayant un poids inférieur à 110 (le poids de la mère est en livres) ou ayant un bébé de poids inférieur à 2,5 kg.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb77"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">LWT</span> <span class="op">&lt;</span> <span class="fl">110</span> <span class="op">|</span> <span class="va">BWT</span> <span class="op">&lt;</span> <span class="fl">2500</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"LWT"</span>, <span class="st">"BWT"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>    ID LWT  BWT
1   87 105 2557
2   88 108 2594
3   89 107 2600
4   93 103 2637
5   96  95 2722
6   98  95 2750
7   99 107 2750
8  100 100 2769
9  101 100 2769
10 102  98 2778
11 107 100 2835
12 118  90 2948
13 127 109 3033
14 132  90 3076
15 133  90 3076
16 137  85 3090
17 141  95 3147
18 146 103 3203
19 181 105 3572
20 188  95 3637
21 216  95 3997
22   4 120  709
23  10 130 1021
24  11 187 1135
25  13 105 1330
26  15  85 1474
27  16 150 1588
28  17  97 1588
29  18 128 1701
30  19 132 1729
31  20 165 1790
32  22 105 1818
33  23  91 1885
34  24 115 1893
35  25 130 1899
36  26  92 1928
37  27 150 1928
38  28 200 1928
39  29 155 1936
40  30 103 1970
41  31 125 2055
42  32  89 2055
43  33 102 2082
44  34 112 2084
45  35 117 2084
46  36 138 2100
47  37 130 2125
48  40 120 2126
49  42 130 2187
50  43 130 2187
51  44  80 2211
52  45 110 2225
53  46 105 2240
54  47 109 2240
55  49 148 2282
56  50 110 2296
57  51 121 2296
58  52 100 2301
59  54  96 2325
60  56 102 2353
61  57 110 2353
62  59 187 2367
63  60 122 2381
64  61 105 2381
65  62 115 2381
66  63 120 2395
67  65 142 2410
68  67 130 2410
69  68 120 2414
70  69 110 2424
71  71 120 2438
72  75 154 2442
73  76 105 2450
74  77 190 2466
75  78 101 2466
76  79  95 2466
77  81 100 2495
78  82  94 2495
79  83 142 2495
80  84 130 2495</code></pre>
</div>
</div>
</section><section id="exercice-5-suppression-de-lignes-ou-de-colonnes" class="level4"><h4 class="anchored" data-anchor-id="exercice-5-suppression-de-lignes-ou-de-colonnes">Exercice 5 : Suppression de lignes ou de colonnes</h4>
<p>En essayant avec <code>[,]</code>, <code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code> et les fonctions de <code>dplyr</code> :</p>
<ol type="1">
<li><p>Supprimer la première ligne du jeu de données.</p></li>
<li><p>Supprimer les colonnes “AGE”, “LWT”, “RACE”, “BWT”.</p></li>
</ol>
<p><em>Indice : utiliser la même syntaxe que pour la sélection mais avec le signe <code>-</code> pour indiquer les éléments à supprimer…</em></p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb79"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Pour supprimer des lignes ou des colonnes, on peut utiliser `[,]` :</span></span>
<span><span class="va">naissance_sans_ind1</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">naissance_sans_ind1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 188</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb81"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance_suppr_cro</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">10</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">naissance_suppr_cro</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  ID      SMOKE PTL HT UI FVT
1 85 Non-Fumeur   0  0  1   0
2 86 Non-Fumeur   0  0  0   3
3 87     Fumeur   0  0  0   1
4 88     Fumeur   0  0  1   2
5 89     Fumeur   0  0  1   0
6 91 Non-Fumeur   0  0  0   0</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb83"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># naissance_sans_AGE &lt;- naissance[, -c('AGE', 'LWT', 'RACE', 'BWT')] Cette</span></span>
<span><span class="co"># dernière opération n'est pas possible.</span></span>
<span></span>
<span><span class="co"># Là encore, les fonctions `subset()` et `select()` permettent plus</span></span>
<span><span class="co"># d'opérations avec une syntaxe très simple :</span></span>
<span><span class="va">naissance_suprr_sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">naissance</span>, select <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">AGE</span><span class="op">:</span><span class="va">RACE</span>, <span class="va">BWT</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">naissance_suprr_sel</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">AGE</span><span class="op">:</span><span class="va">RACE</span>, <span class="va">BWT</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="exercice-6-ajout-de-lignes-ou-de-colonnes" class="level4"><h4 class="anchored" data-anchor-id="exercice-6-ajout-de-lignes-ou-de-colonnes">Exercice 6 : Ajout de lignes ou de colonnes</h4>
<p>Ajouter un une ligne (un individu) possédant les valeurs suivantes : <code>1, 20, 143, 2, "Non-Fumeur", 0, 0, 0, 0, 2500</code></p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span>, <span class="fl">143</span>, <span class="fl">2</span>, <span class="st">"Non-Fumeur"</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">2500</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>    ID AGE LWT RACE      SMOKE PTL HT UI FVT  BWT
185 79  28  95    1     Fumeur   0  0  0   2 2466
186 81  14 100    3 Non-Fumeur   0  0  0   2 2495
187 82  23  94    3     Fumeur   0  0  0   0 2495
188 83  17 142    2 Non-Fumeur   0  1  0   0 2495
189 84  21 130    1     Fumeur   0  1  0   3 2495
190  1  20 143    2 Non-Fumeur   0  0  0   0 2500</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Apparemment tout va bien...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   190 obs. of  10 variables:
 $ ID   : chr  "85" "86" "87" "88" ...
 $ AGE  : chr  "19" "33" "20" "21" ...
 $ LWT  : chr  "182" "155" "105" "108" ...
 $ RACE : chr  "2" "3" "1" "1" ...
 $ SMOKE: Factor w/ 2 levels "Non-Fumeur","Fumeur": 1 1 2 2 2 1 1 1 2 2 ...
 $ PTL  : chr  "0" "0" "0" "0" ...
 $ HT   : chr  "0" "0" "0" "0" ...
 $ UI   : chr  "1" "0" "0" "1" ...
 $ FVT  : chr  "0" "3" "1" "2" ...
 $ BWT  : chr  "2523" "2551" "2557" "2594" ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Mais on vient en fait de casser notre jeu de données...</span></span>
<span></span>
<span><span class="va">naissance</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.delim</a></span><span class="op">(</span><span class="st">"naissance.txt"</span><span class="op">)</span></span>
<span><span class="va">naissance</span><span class="op">$</span><span class="va">SMOKE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">$</span><span class="va">SMOKE</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Non-Fumeur"</span>, <span class="st">"Fumeur"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">naissance</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span>, <span class="fl">143</span>, <span class="fl">2</span>, <span class="st">"Non-Fumeur"</span>, <span class="fl">0</span>, <span class="fl">0</span>,</span>
<span>    <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">2500</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>    ID AGE LWT RACE      SMOKE PTL HT UI FVT  BWT
185 79  28  95    1     Fumeur   0  0  0   2 2466
186 81  14 100    3 Non-Fumeur   0  0  0   2 2495
187 82  23  94    3     Fumeur   0  0  0   0 2495
188 83  17 142    2 Non-Fumeur   0  1  0   0 2495
189 84  21 130    1     Fumeur   0  1  0   3 2495
190  1  20 143    2 Non-Fumeur   0  0  0   0 2500</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb90"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   190 obs. of  10 variables:
 $ ID   : num  85 86 87 88 89 91 92 93 94 95 ...
 $ AGE  : num  19 33 20 21 18 21 22 17 29 26 ...
 $ LWT  : num  182 155 105 108 107 124 118 103 123 113 ...
 $ RACE : num  2 3 1 1 1 3 1 3 1 1 ...
 $ SMOKE: Factor w/ 2 levels "Non-Fumeur","Fumeur": 1 1 2 2 2 1 1 1 2 2 ...
 $ PTL  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ HT   : num  0 0 0 0 0 0 0 0 0 0 ...
 $ UI   : num  1 0 0 1 1 0 0 0 0 0 ...
 $ FVT  : num  0 3 1 2 0 0 1 1 1 0 ...
 $ BWT  : num  2523 2551 2557 2594 2600 ...</code></pre>
</div>
</div>
<p><strong>NB</strong>: On peut rajouter une colonne (une variable), à l’aide de <code>$</code>, <code><a href="https://rdrr.io/r/base/transform.html">transform()</a></code> ou <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> (comme vu précédemment).</p>
</section></section><section id="fusion" class="level3"><h3 class="anchored" data-anchor-id="fusion">Fusion</h3>
<p>La fonction <code><a href="https://rdrr.io/r/base/merge.html">merge()</a></code> permet de fusionner deux tableaux de données :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb92"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  ID AGE LWT RACE      SMOKE PTL HT UI FVT  BWT
1 85  19 182    2 Non-Fumeur   0  0  1   0 2523
2 86  33 155    3 Non-Fumeur   0  0  0   3 2551
3 87  20 105    1     Fumeur   0  0  0   1 2557
4 88  21 108    1     Fumeur   0  0  1   2 2594
5 89  18 107    1     Fumeur   0  0  1   0 2600
6 91  21 124    3 Non-Fumeur   0  0  0   0 2622</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb94"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nais1</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nais1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  ID AGE LWT RACE      SMOKE PTL
1 85  19 182    2 Non-Fumeur   0
2 86  33 155    3 Non-Fumeur   0
3 87  20 105    1     Fumeur   0
4 88  21 108    1     Fumeur   0
5 89  18 107    1     Fumeur   0
6 91  21 124    3 Non-Fumeur   0</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb96"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nais2</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">7</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nais2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  ID HT UI FVT  BWT
1 85  0  1   0 2523
2 86  0  0   3 2551
3 87  0  0   1 2557
4 88  0  1   2 2594
5 89  0  1   0 2600
6 91  0  0   0 2622</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb98"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nais_fus1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">nais1</span>, <span class="va">nais2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nais_fus1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  ID AGE LWT RACE      SMOKE PTL HT UI FVT  BWT
1  1  20 143    2 Non-Fumeur   0  0  0   0 2500
2  4  28 120    3     Fumeur   1  0  1   0  709
3 10  29 130    1 Non-Fumeur   0  0  1   2 1021
4 11  34 187    2     Fumeur   0  1  0   0 1135
5 13  25 105    3 Non-Fumeur   1  1  0   0 1330
6 15  25  85    3 Non-Fumeur   0  0  1   0 1474</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb100"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Ici, vu que les individus sont dans le même ordre on aurait pu utiliser la</span></span>
<span><span class="co"># fonction cbind(), et la colonne ID n'est pas utile :</span></span>
<span><span class="va">nais_fus2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">nais1</span>, <span class="va">nais2</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nais_fus2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  ID AGE LWT RACE      SMOKE PTL HT UI FVT  BWT
1 85  19 182    2 Non-Fumeur   0  0  1   0 2523
2 86  33 155    3 Non-Fumeur   0  0  0   3 2551
3 87  20 105    1     Fumeur   0  0  0   1 2557
4 88  21 108    1     Fumeur   0  0  1   2 2594
5 89  18 107    1     Fumeur   0  0  1   0 2600
6 91  21 124    3 Non-Fumeur   0  0  0   0 2622</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb102"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="va">nais_fus1</span>, <span class="va">nais_fus2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb104"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Les deux dataframes ne sont pas identitiques, car merge a classé par ordre</span></span>
<span><span class="co"># croissant suivant la variable de regroupement ID, mais les informations sont</span></span>
<span><span class="co"># les mêmes.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>On peut également fusionner deux tableaux de données où les individus (qui doivent être les mêmes) ne sont pas dans le même ordre :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb105"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">desordre</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">nais3</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span><span class="va">desordre</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">7</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nais3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>     ID HT UI FVT  BWT
173  61  0  0   0 2381
103 199  0  0   0 3770
160  44  0  1   0 2211
25  111  0  1   2 2877
114 210  0  1   1 3912
140  20  1  0   1 1790</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb107"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nais_fus3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">nais1</span>, <span class="va">nais3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nais_fus3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  ID AGE LWT RACE      SMOKE PTL HT UI FVT  BWT
1  1  20 143    2 Non-Fumeur   0  0  0   0 2500
2  4  28 120    3     Fumeur   1  0  1   0  709
3 10  29 130    1 Non-Fumeur   0  0  1   2 1021
4 11  34 187    2     Fumeur   0  1  0   0 1135
5 13  25 105    3 Non-Fumeur   1  1  0   0 1330
6 15  25  85    3 Non-Fumeur   0  0  1   0 1474</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb109"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="va">nais_fus1</span>, <span class="va">nais_fus3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<section id="exercice-7-join" class="level4"><h4 class="anchored" data-anchor-id="exercice-7-join">Exercice 7 : join</h4>
<ol type="1">
<li>Consulter l’aide de <code><a href="https://dplyr.tidyverse.org/reference/sample_n.html">dplyr::sample_n</a></code> et trouver un moyens simple de permuter les lignes du jeu de données.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb111"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance_perm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span><span class="va">naissance</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">naissance_perm</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">ID</th>
<th style="text-align: right;">AGE</th>
<th style="text-align: right;">LWT</th>
<th style="text-align: right;">RACE</th>
<th style="text-align: left;">SMOKE</th>
<th style="text-align: right;">PTL</th>
<th style="text-align: right;">HT</th>
<th style="text-align: right;">UI</th>
<th style="text-align: right;">FVT</th>
<th style="text-align: right;">BWT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">197</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">184</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3756</td>
</tr>
<tr class="even">
<td style="text-align: right;">174</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">131</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3460</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1474</td>
</tr>
<tr class="even">
<td style="text-align: right;">87</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2557</td>
</tr>
<tr class="odd">
<td style="text-align: right;">184</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">125</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3614</td>
</tr>
<tr class="even">
<td style="text-align: right;">140</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">130</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3132</td>
</tr>
</tbody>
</table>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb112"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">ID</th>
<th style="text-align: right;">AGE</th>
<th style="text-align: right;">LWT</th>
<th style="text-align: right;">RACE</th>
<th style="text-align: left;">SMOKE</th>
<th style="text-align: right;">PTL</th>
<th style="text-align: right;">HT</th>
<th style="text-align: right;">UI</th>
<th style="text-align: right;">FVT</th>
<th style="text-align: right;">BWT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">85</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">182</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2523</td>
</tr>
<tr class="even">
<td style="text-align: right;">86</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">155</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2551</td>
</tr>
<tr class="odd">
<td style="text-align: right;">87</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2557</td>
</tr>
<tr class="even">
<td style="text-align: right;">88</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">108</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2594</td>
</tr>
<tr class="odd">
<td style="text-align: right;">89</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">107</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2600</td>
</tr>
<tr class="even">
<td style="text-align: right;">91</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">124</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2622</td>
</tr>
</tbody>
</table>
</div>
</div>
<ol start="2" type="1">
<li>Consulter l’aide de <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">dplyr::join()</a></code> (pour plus d’informations sur les fusions avec <code>dplyr</code> consulter cette <a href="https://cran.rstudio.com/web/packages/dplyr/vignettes/two-table.html">page</a>), puis utiliser la fonction <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">dplyr::left_join()</a></code> pour fusionner les tables <code>nais1</code> et <code>nais3</code>.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb113"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nais_joined</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">nais1</span>, <span class="va">nais3</span>, by <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nais_joined</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">ID</th>
<th style="text-align: right;">AGE</th>
<th style="text-align: right;">LWT</th>
<th style="text-align: right;">RACE</th>
<th style="text-align: left;">SMOKE</th>
<th style="text-align: right;">PTL</th>
<th style="text-align: right;">HT</th>
<th style="text-align: right;">UI</th>
<th style="text-align: right;">FVT</th>
<th style="text-align: right;">BWT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">85</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">182</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2523</td>
</tr>
<tr class="even">
<td style="text-align: right;">86</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">155</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2551</td>
</tr>
<tr class="odd">
<td style="text-align: right;">87</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2557</td>
</tr>
<tr class="even">
<td style="text-align: right;">88</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">108</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2594</td>
</tr>
<tr class="odd">
<td style="text-align: right;">89</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">107</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2600</td>
</tr>
<tr class="even">
<td style="text-align: right;">91</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">124</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2622</td>
</tr>
</tbody>
</table>
</div>
</div>
</section></section><section id="trier-un-tableau-de-données-le-long-dune-colonne" class="level3"><h3 class="anchored" data-anchor-id="trier-un-tableau-de-données-le-long-dune-colonne">Trier un tableau de données le long d’une colonne</h3>
<p>Pour trier le tableau suivant la variable <code>ID</code> par ordre croissant, on utilise la fonction <code><a href="https://rdrr.io/r/base/order.html">order()</a></code> :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb114"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nais_orderID</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">$</span><span class="va">ID</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nais_orderID</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">ID</th>
<th style="text-align: right;">AGE</th>
<th style="text-align: right;">LWT</th>
<th style="text-align: right;">RACE</th>
<th style="text-align: left;">SMOKE</th>
<th style="text-align: right;">PTL</th>
<th style="text-align: right;">HT</th>
<th style="text-align: right;">UI</th>
<th style="text-align: right;">FVT</th>
<th style="text-align: right;">BWT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">190</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">143</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2500</td>
</tr>
<tr class="even">
<td style="text-align: left;">131</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">709</td>
</tr>
<tr class="odd">
<td style="text-align: left;">132</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">130</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1021</td>
</tr>
<tr class="even">
<td style="text-align: left;">133</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">34</td>
<td style="text-align: right;">187</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1135</td>
</tr>
<tr class="odd">
<td style="text-align: left;">134</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1330</td>
</tr>
<tr class="even">
<td style="text-align: left;">135</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1474</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Maintenant, si on veut trier le tableau suivant l’âge par ordre décroissant :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb115"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nais_decAGE</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">$</span><span class="va">AGE</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">nais_decAGE</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">ID</th>
<th style="text-align: right;">AGE</th>
<th style="text-align: right;">LWT</th>
<th style="text-align: right;">RACE</th>
<th style="text-align: left;">SMOKE</th>
<th style="text-align: right;">PTL</th>
<th style="text-align: right;">HT</th>
<th style="text-align: right;">UI</th>
<th style="text-align: right;">FVT</th>
<th style="text-align: right;">BWT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">130</td>
<td style="text-align: right;">226</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4990</td>
</tr>
<tr class="even">
<td style="text-align: left;">23</td>
<td style="text-align: right;">108</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">202</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2836</td>
</tr>
<tr class="odd">
<td style="text-align: left;">89</td>
<td style="text-align: right;">183</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3600</td>
</tr>
<tr class="even">
<td style="text-align: left;">33</td>
<td style="text-align: right;">119</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">121</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2948</td>
</tr>
<tr class="odd">
<td style="text-align: left;">127</td>
<td style="text-align: right;">223</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">170</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4174</td>
</tr>
<tr class="even">
<td style="text-align: left;">133</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">34</td>
<td style="text-align: right;">187</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1135</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: right;">86</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">155</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2551</td>
</tr>
<tr class="even">
<td style="text-align: left;">40</td>
<td style="text-align: right;">127</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">109</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3033</td>
</tr>
<tr class="odd">
<td style="text-align: left;">114</td>
<td style="text-align: right;">210</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">117</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3912</td>
</tr>
<tr class="even">
<td style="text-align: left;">21</td>
<td style="text-align: right;">106</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">121</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2835</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>On remarque qu’il y a des ex-aequo. On peut rajouter une variable sur laquelle trier les ex-aequo, en deuxième argument de <code><a href="https://rdrr.io/r/base/order.html">order()</a></code> :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb116"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nais_decAGE_decLWT</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">$</span><span class="va">AGE</span>, <span class="va">naissance</span><span class="op">$</span><span class="va">LWT</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="op">]</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">nais_decAGE_decLWT</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">ID</th>
<th style="text-align: right;">AGE</th>
<th style="text-align: right;">LWT</th>
<th style="text-align: right;">RACE</th>
<th style="text-align: left;">SMOKE</th>
<th style="text-align: right;">PTL</th>
<th style="text-align: right;">HT</th>
<th style="text-align: right;">UI</th>
<th style="text-align: right;">FVT</th>
<th style="text-align: right;">BWT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">130</td>
<td style="text-align: right;">226</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4990</td>
</tr>
<tr class="even">
<td style="text-align: left;">23</td>
<td style="text-align: right;">108</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">202</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2836</td>
</tr>
<tr class="odd">
<td style="text-align: left;">89</td>
<td style="text-align: right;">183</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3600</td>
</tr>
<tr class="even">
<td style="text-align: left;">127</td>
<td style="text-align: right;">223</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">170</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4174</td>
</tr>
<tr class="odd">
<td style="text-align: left;">33</td>
<td style="text-align: right;">119</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">121</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2948</td>
</tr>
<tr class="even">
<td style="text-align: left;">133</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">34</td>
<td style="text-align: right;">187</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1135</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: right;">86</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">155</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2551</td>
</tr>
<tr class="even">
<td style="text-align: left;">114</td>
<td style="text-align: right;">210</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">117</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3912</td>
</tr>
<tr class="odd">
<td style="text-align: left;">40</td>
<td style="text-align: right;">127</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">109</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3033</td>
</tr>
<tr class="even">
<td style="text-align: left;">111</td>
<td style="text-align: right;">207</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">186</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3860</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Enfin, si on veut que le classement soit fait de façon croissante sur <code>LWT</code>, on peut procéder de la façon suivante :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb117"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nais_decAGE_LWT</span> <span class="op">&lt;-</span> <span class="va">naissance</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">$</span><span class="va">AGE</span>, <span class="op">-</span><span class="va">naissance</span><span class="op">$</span><span class="va">LWT</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="op">]</span></span>
<span><span class="va">nais_decAGE_LWT</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>     ID AGE LWT RACE      SMOKE PTL HT UI FVT  BWT
130 226  45 123    1 Non-Fumeur   0  0  0   1 4990
89  183  36 175    1 Non-Fumeur   0  0  0   0 3600
23  108  36 202    1 Non-Fumeur   0  0  0   1 2836
33  119  35 121    2     Fumeur   1  0  0   1 2948
127 223  35 170    1 Non-Fumeur   1  0  0   1 4174
133  11  34 187    2     Fumeur   0  1  0   0 1135
40  127  33 109    1     Fumeur   0  0  0   1 3033
114 210  33 117    1 Non-Fumeur   0  0  1   1 3912
2    86  33 155    3 Non-Fumeur   0  0  0   3 2551
141  22  32 105    1     Fumeur   0  0  0   0 1818</code></pre>
</div>
</div>
<section id="exercice-8-dplyrarrange" class="level4"><h4 class="anchored" data-anchor-id="exercice-8-dplyrarrange">Exercice 8 : <code>dplyr::arrange()</code>
</h4>
<ol type="1">
<li><p>Utiliser la fonction <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">dplyr::arrange()</a></code> pour reproduire les tris précédents.</p></li>
<li><p>Trier le dataframe suivant la variable <code>SMOKE</code> (qui est un facteur). Comment R choisit-il pour déterminer quelle modalité du facteur va apparaître en premier ?</p></li>
<li><p>Rajouter une variable, nommée <code>lettre</code> au dataframe, contenant des lettres majuscules choisies alétoirement. On peut utiliser <code>sample(letters, nrow(naissance), replace = TRUE)</code> pour générer ce tirage aléatoire.</p></li>
<li><p>Trier le dataframe suivant la nouvelle variable <code>lettre</code>.</p></li>
</ol></section></section><section id="la-classe-tlb" class="level3"><h3 class="anchored" data-anchor-id="la-classe-tlb">La classe <code>tlb</code>
</h3>
<p>Le package s’appuie sur une nouvelle classe d’objets : <code>tbl</code>. Le résultat affiché lorsqu’on tape le nom du tableau est tronqué pour cette nouvelle classe :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb119"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nais</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">)</span></span>
<span><span class="va">nais</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 190 × 10
      ID   AGE   LWT  RACE SMOKE        PTL    HT    UI   FVT   BWT
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1    85    19   182     2 Non-Fumeur     0     0     1     0  2523
 2    86    33   155     3 Non-Fumeur     0     0     0     3  2551
 3    87    20   105     1 Fumeur         0     0     0     1  2557
 4    88    21   108     1 Fumeur         0     0     1     2  2594
 5    89    18   107     1 Fumeur         0     0     1     0  2600
 6    91    21   124     3 Non-Fumeur     0     0     0     0  2622
 7    92    22   118     1 Non-Fumeur     0     0     0     1  2637
 8    93    17   103     3 Non-Fumeur     0     0     0     1  2637
 9    94    29   123     1 Fumeur         0     0     0     1  2663
10    95    26   113     1 Fumeur         0     0     0     0  2665
# ℹ 180 more rows</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb121"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">nais</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p>De plus, le comportement de la sélection de colonne est changé : on garde la structure de tableau de données même lorsqu’on sélectionne une seule colonne :</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb123"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">naissance</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> num [1:190] 19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb125"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">nais</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>tibble [190 × 1] (S3: tbl_df/tbl/data.frame)
 $ AGE: num [1:190] 19 33 20 21 18 21 22 17 29 26 ...</code></pre>
</div>
</div>
<section id="exercice-9-dplyrarrange" class="level4"><h4 class="anchored" data-anchor-id="exercice-9-dplyrarrange">Exercice 9 : <code>dplyr::arrange()</code>
</h4>
<ol type="1">
<li>Utiliser la fonction<code><a href="https://dplyr.tidyverse.org/reference/arrange.html">dplyr::arrange()</a></code> pour ordonner le tableau de données naissance par age, avec les poids de naissance par ordre décroissant pour les égalités.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb127"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="va">AGE</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">BWT</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>     ID AGE LWT RACE      SMOKE PTL HT UI FVT  BWT
1   213  14 135    1 Non-Fumeur   0  0  0   0 3941
2    81  14 100    3 Non-Fumeur   0  0  0   2 2495
3    78  14 101    3     Fumeur   1  0  0   0 2466
4   102  15  98    2 Non-Fumeur   0  0  0   0 2778
5    62  15 115    3 Non-Fumeur   0  0  1   0 2381
6    57  15 110    1 Non-Fumeur   0  0  0   0 2353
7   216  16  95    3 Non-Fumeur   0  0  0   1 3997
8   206  16 170    2 Non-Fumeur   0  0  0   4 3860
9   189  16 135    1     Fumeur   0  0  0   0 3643
10  166  16 112    2 Non-Fumeur   0  0  0   0 3374
11  167  16 135    1     Fumeur   0  0  0   0 3374
12  143  16 110    3 Non-Fumeur   0  0  0   0 3175
13   25  16 130    3 Non-Fumeur   0  0  0   1 1899
14  180  17 120    3     Fumeur   0  0  0   0 3572
15  147  17 119    3 Non-Fumeur   0  0  0   0 3225
16  148  17 119    3 Non-Fumeur   0  0  0   0 3225
17  116  17 113    2 Non-Fumeur   0  0  0   1 2920
18  117  17 113    2 Non-Fumeur   0  0  0   1 2920
19  113  17 122    1     Fumeur   0  0  0   0 2906
20   93  17 103    3 Non-Fumeur   0  0  0   1 2637
21   83  17 142    2 Non-Fumeur   0  1  0   0 2495
22   71  17 120    2 Non-Fumeur   0  0  0   2 2438
23   68  17 120    1     Fumeur   0  0  0   3 2414
24   45  17 110    1     Fumeur   0  0  0   0 2225
25   37  17 130    3     Fumeur   1  0  1   0 2125
26  208  18 120    3 Non-Fumeur   0  0  0   1 3884
27  205  18 120    1     Fumeur   0  0  0   2 3856
28  168  18 229    2 Non-Fumeur   0  0  0   0 3402
29  132  18  90    1     Fumeur   0  0  1   0 3076
30  133  18  90    1     Fumeur   0  0  1   0 3076
31  100  18 100    1     Fumeur   0  0  0   0 2769
32  101  18 100    1     Fumeur   0  0  0   0 2769
33   89  18 107    1     Fumeur   0  0  1   0 2600
34   50  18 110    2     Fumeur   1  0  0   0 2296
35   49  18 148    3 Non-Fumeur   0  0  0   0 2282
36  224  19 120    1     Fumeur   0  0  0   0 4238
37  197  19 184    1     Fumeur   0  1  0   0 3756
38  192  19 147    1     Fumeur   0  0  0   0 3651
39  193  19 147    1     Fumeur   0  0  0   0 3651
40  187  19 235    1     Fumeur   0  1  0   0 3629
41  181  19 105    3 Non-Fumeur   0  0  0   0 3572
42  142  19 115    3 Non-Fumeur   0  0  0   0 3175
43  135  19 132    3 Non-Fumeur   0  0  0   0 3090
44  129  19 189    1 Non-Fumeur   0  0  0   2 3062
45  124  19 138    1     Fumeur   0  0  0   2 2977
46   97  19 150    3 Non-Fumeur   0  0  0   1 2733
47   96  19  95    3 Non-Fumeur   0  0  0   0 2722
48   85  19 182    2 Non-Fumeur   0  0  1   0 2523
49   34  19 112    1     Fumeur   0  0  1   0 2084
50   33  19 102    1 Non-Fumeur   0  0  0   2 2082
51   23  19  91    1     Fumeur   2  0  1   0 1885
52  217  20 158    1 Non-Fumeur   0  0  0   1 3997
53  211  20 170    1     Fumeur   0  0  0   0 3940
54  201  20 120    3 Non-Fumeur   0  0  0   0 3770
55  177  20 127    3 Non-Fumeur   0  0  0   0 3487
56  172  20 121    2     Fumeur   0  0  0   0 3444
57  160  20 141    1 Non-Fumeur   2  0  1   1 3317
58  155  20 169    3 Non-Fumeur   1  0  1   1 3274
59  146  20 103    3 Non-Fumeur   0  0  0   0 3203
60  104  20 120    3 Non-Fumeur   0  0  1   0 2807
61   87  20 105    1     Fumeur   0  0  0   1 2557
62    1  20 143    2 Non-Fumeur   0  0  0   0 2500
63   76  20 105    3 Non-Fumeur   0  0  0   3 2450
64   60  20 122    2     Fumeur   0  0  0   0 2381
65   51  20 121    1     Fumeur   1  0  1   0 2296
66   47  20 109    3 Non-Fumeur   0  0  0   0 2240
67   44  20  80    3     Fumeur   0  0  1   0 2211
68   40  20 120    2     Fumeur   0  0  0   3 2126
69   31  20 125    3 Non-Fumeur   0  0  1   0 2055
70   27  20 150    1     Fumeur   0  0  0   2 1928
71  219  21 115    1 Non-Fumeur   0  0  0   1 4054
72  186  21 134    3 Non-Fumeur   0  0  0   2 3629
73  144  21 110    3     Fumeur   0  0  1   0 3203
74  131  21 160    1 Non-Fumeur   0  0  0   0 3062
75  128  21 185    2     Fumeur   0  0  0   2 3042
76   91  21 124    3 Non-Fumeur   0  0  0   0 2622
77   88  21 108    1     Fumeur   0  0  1   2 2594
78   84  21 130    1     Fumeur   0  1  0   3 2495
79   52  21 100    3 Non-Fumeur   1  0  0   4 2301
80   30  21 103    3 Non-Fumeur   0  0  0   0 1970
81   28  21 200    2 Non-Fumeur   0  0  1   2 1928
82   20  21 165    1     Fumeur   0  1  0   1 1790
83  220  22 129    1 Non-Fumeur   0  0  0   0 4111
84  204  22 169    1 Non-Fumeur   0  0  0   0 3827
85  184  22 125    1 Non-Fumeur   0  0  0   1 3614
86  174  22 131    1 Non-Fumeur   0  0  0   1 3460
87  161  22 158    2 Non-Fumeur   1  0  0   2 3317
88  162  22 112    1     Fumeur   2  0  0   0 3317
89  140  22 130    1     Fumeur   0  0  0   0 3132
90  138  22 120    1 Non-Fumeur   0  1  0   1 3100
91  137  22  85    3     Fumeur   0  0  0   0 3090
92   98  22  95    3 Non-Fumeur   0  1  0   0 2750
93   92  22 118    1 Non-Fumeur   0  0  0   1 2637
94   67  22 130    1     Fumeur   0  0  0   1 2410
95   42  22 130    1     Fumeur   1  0  1   1 2187
96  200  23 110    1 Non-Fumeur   0  0  0   1 3770
97  182  23 130    1 Non-Fumeur   0  0  0   0 3586
98  179  23 123    3 Non-Fumeur   0  0  0   0 3544
99  173  23 190    1 Non-Fumeur   0  0  0   0 3459
100 164  23 115    3     Fumeur   0  0  0   1 3331
101 149  23 119    3 Non-Fumeur   0  0  0   2 3232
102 139  23 128    3 Non-Fumeur   0  0  0   0 3104
103 130  23 130    2 Non-Fumeur   0  0  0   1 3062
104  82  23  94    3     Fumeur   0  0  0   0 2495
105  69  23 110    1     Fumeur   1  0  0   0 2424
106  63  23 120    3 Non-Fumeur   0  0  0   0 2395
107  59  23 187    2     Fumeur   0  0  0   1 2367
108  17  23  97    3 Non-Fumeur   0  0  1   1 1588
109 225  24 116    1 Non-Fumeur   0  0  0   1 4593
110 199  24 110    3 Non-Fumeur   1  0  0   0 3770
111 196  24 110    1 Non-Fumeur   0  0  0   1 3728
112 185  24 133    1 Non-Fumeur   0  0  0   0 3614
113 156  24 115    3 Non-Fumeur   0  0  0   2 3274
114 150  24 110    3 Non-Fumeur   0  0  0   0 3232
115 136  24 115    1 Non-Fumeur   0  0  0   2 3090
116 118  24  90    1     Fumeur   1  0  0   1 2948
117  61  24 105    2     Fumeur   0  0  0   0 2381
118  36  24 138    1 Non-Fumeur   0  0  0   0 2100
119  29  24 155    1     Fumeur   1  0  0   0 1936
120  19  24 132    3 Non-Fumeur   0  1  0   0 1729
121  18  24 128    2 Non-Fumeur   1  0  0   1 1701
122 221  25 130    1 Non-Fumeur   0  0  0   2 4153
123 215  25 120    1 Non-Fumeur   0  0  0   2 3983
124 202  25 241    2 Non-Fumeur   0  1  0   0 3790
125 188  25  95    1     Fumeur   3  0  1   0 3637
126 169  25 140    1 Non-Fumeur   0  0  0   1 3416
127 120  25 155    1 Non-Fumeur   0  0  0   1 2977
128 121  25 125    2 Non-Fumeur   0  0  0   0 2977
129 111  25 120    3 Non-Fumeur   0  0  1   2 2877
130 103  25 118    1     Fumeur   0  0  0   3 2782
131  46  25 105    3 Non-Fumeur   1  0  0   1 2240
132  32  25  89    3 Non-Fumeur   2  0  0   1 2055
133  26  25  92    1     Fumeur   0  0  0   0 1928
134  24  25 115    3 Non-Fumeur   0  0  0   0 1893
135  15  25  85    3 Non-Fumeur   0  0  1   0 1474
136  13  25 105    3 Non-Fumeur   1  1  0   0 1330
137 218  26 160    3 Non-Fumeur   0  0  0   0 4054
138 154  26 133    3     Fumeur   2  0  0   0 3260
139 115  26 168    2     Fumeur   0  0  0   0 2920
140  95  26 113    1     Fumeur   0  0  0   0 2665
141  77  26 190    1     Fumeur   0  0  0   0 2466
142  75  26 154    3 Non-Fumeur   1  1  0   1 2442
143  54  26  96    3 Non-Fumeur   0  0  0   0 2325
144  35  26 117    1     Fumeur   1  0  0   0 2084
145 125  27 124    1     Fumeur   0  0  0   0 2992
146  43  27 130    2 Non-Fumeur   0  0  1   0 2187
147  16  27 150    3 Non-Fumeur   0  0  0   0 1588
148 214  28 130    3 Non-Fumeur   0  0  0   0 3969
149 212  28 134    3 Non-Fumeur   0  0  0   1 3941
150 159  28 250    3     Fumeur   0  0  0   6 3303
151 151  28 140    1 Non-Fumeur   0  0  0   0 3234
152 112  28 167    1 Non-Fumeur   0  0  0   0 2877
153 109  28 120    3 Non-Fumeur   0  0  0   0 2863
154 105  28 120    1     Fumeur   0  0  0   1 2821
155  79  28  95    1     Fumeur   0  0  0   2 2466
156   4  28 120    3     Fumeur   1  0  1   0  709
157 209  29 130    1     Fumeur   0  0  0   2 3884
158 190  29 135    1 Non-Fumeur   0  0  0   1 3651
159 191  29 154    1 Non-Fumeur   0  0  0   1 3651
160 123  29 140    1     Fumeur   0  0  0   2 2977
161 114  29 150    1 Non-Fumeur   0  0  0   2 2920
162  94  29 123    1     Fumeur   0  0  0   1 2663
163  10  29 130    1 Non-Fumeur   0  0  1   2 1021
164 203  30 112    1 Non-Fumeur   0  0  0   1 3799
165 195  30 137    1 Non-Fumeur   0  0  0   1 3699
166 176  30 110    3 Non-Fumeur   0  0  0   0 3475
167 145  30 153    3 Non-Fumeur   0  0  0   0 3203
168 141  30  95    1     Fumeur   0  0  0   2 3147
169  99  30 107    3 Non-Fumeur   1  0  1   2 2750
170  65  30 142    1     Fumeur   1  0  0   0 2410
171 222  31 120    1 Non-Fumeur   0  0  0   2 4167
172 163  31 150    3     Fumeur   0  0  0   2 3321
173 126  31 215    1     Fumeur   0  0  0   2 3005
174 107  31 100    1 Non-Fumeur   0  0  1   3 2835
175  56  31 102    1     Fumeur   1  0  0   1 2353
176 207  32 186    1 Non-Fumeur   0  0  0   2 3860
177 175  32 170    1 Non-Fumeur   0  0  0   0 3473
178 170  32 134    1     Fumeur   1  0  0   4 3430
179 134  32 132    1 Non-Fumeur   0  0  0   4 3080
180 106  32 121    3 Non-Fumeur   0  0  0   2 2835
181  22  32 105    1     Fumeur   0  0  0   0 1818
182 210  33 117    1 Non-Fumeur   0  0  1   1 3912
183 127  33 109    1     Fumeur   0  0  0   1 3033
184  86  33 155    3 Non-Fumeur   0  0  0   3 2551
185  11  34 187    2     Fumeur   0  1  0   0 1135
186 223  35 170    1 Non-Fumeur   1  0  0   1 4174
187 119  35 121    2     Fumeur   1  0  0   1 2948
188 183  36 175    1 Non-Fumeur   0  0  0   0 3600
189 108  36 202    1 Non-Fumeur   0  0  0   1 2836
190 226  45 123    1 Non-Fumeur   0  0  0   1 4990</code></pre>
</div>
</div>
</section></section></section></section><section id="introduction-au-pipe" class="level1"><h1>Introduction au pipe <code>%&gt;%</code>
</h1>
<section id="exercice-10" class="level4"><h4 class="anchored" data-anchor-id="exercice-10">Exercice 10</h4>
<ol type="1">
<li>À l’aide des fonctions <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">dplyr::group_by()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">dplyr::summarize()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/context.html">dplyr::n()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter()</a></code> et <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">dplyr::arrange()</a></code>, construire le tableau de données donnant le poids moyen à la naissance par âge stratifié sur le statut tabagique, ainsi que le nombre d’observations correpondantes, et ordonné le résultat par ordre de poids moyen croissant en ne sélectionnant que les catéories pour lesquelles le poids moyen est inférieur à 2,5kg.</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb129"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance_exo10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">naissance</span>, <span class="va">AGE</span>, <span class="va">SMOKE</span><span class="op">)</span></span>
<span><span class="va">naissance_exo10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="va">naissance_exo10</span>, poids_moy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">BWT</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">naissance_exo10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">naissance_exo10</span>, <span class="va">poids_moy</span> <span class="op">&lt;</span> <span class="fl">2500</span><span class="op">)</span></span>
<span><span class="va">naissance_exo10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">naissance_exo10</span>, <span class="va">poids_moy</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">naissance_exo10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">AGE</th>
<th style="text-align: left;">SMOKE</th>
<th style="text-align: right;">poids_moy</th>
<th style="text-align: right;">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">34</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">1135.000</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">27</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">1887.500</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">28</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">2324.750</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: right;">24</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">2421.667</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">2466.000</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<ol start="2" type="1">
<li>Réécrire le code de la réponse précédente à l’aide de l’opérateur <code>%&gt;%</code>
</li>
</ol>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb130"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">naissance_exo10_pipe</span> <span class="op">&lt;-</span> <span class="va">naissance</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">AGE</span>, <span class="va">SMOKE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>poids_moy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">BWT</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">poids_moy</span> <span class="op">&lt;</span> <span class="fl">2500</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">poids_moy</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">naissance_exo10_pipe</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">AGE</th>
<th style="text-align: left;">SMOKE</th>
<th style="text-align: right;">poids_moy</th>
<th style="text-align: right;">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">34</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">1135.000</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">27</td>
<td style="text-align: left;">Non-Fumeur</td>
<td style="text-align: right;">1887.500</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">28</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">2324.750</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: right;">24</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">2421.667</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14</td>
<td style="text-align: left;">Fumeur</td>
<td style="text-align: right;">2466.000</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section></section><section id="résumé" class="level1"><h1>Résumé</h1>
<p>Le package <code>dplyr</code> propose un ensemble de fonctions très simples à utiliser et permettant de réaliser toutes les opérations classiques sur les tableaux de données, avec une syntaxe très claire et compréhensible.</p>
<p>Pour aller plus loin, ou voir d’autres exemples, consulter cette <a href="https://cran.rstudio.com/web/packages/dplyr/vignettes/dplyr.html">page</a>. On renverra également vers cet <a href="https://www.rstudio.com/wp-content/uploads/2016/01/data-wrangling-french.pdf">aide-mémoire</a>.</p>
<p>En dehors du changement de syntaxe, les gains en temps de calcul sont souvent significatifs avec <code>dplyr</code>. Il existe un autre package populaire pour faire des manipulations sur les (grands) jeux de données : <code>data.table</code>. La syntaxe est un peu moins intuitive que <code>dplyr</code>, mais l’efficacité est encore accrue.</p>
<!-- -->

</section></main><!-- /main column --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb131" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "SAVOR: Part III"</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "`dplyr` and `%&gt;%`"</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Robin Genuer &amp; Boris Hejblum"</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "06/06/2024"</span></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a><span class="an">highlight-style:</span><span class="co"> pygments</span></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb131-12"><a href="#cb131-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-link: true</span></span>
<span id="cb131-13"><a href="#cb131-13" aria-hidden="true" tabindex="-1"></a><span class="co">    tidy: true</span></span>
<span id="cb131-14"><a href="#cb131-14" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> source</span></span>
<span id="cb131-15"><a href="#cb131-15" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb131-16"><a href="#cb131-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-19"><a href="#cb131-19" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-20"><a href="#cb131-20" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb131-21"><a href="#cb131-21" aria-hidden="true" tabindex="-1"></a>correction <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb131-22"><a href="#cb131-22" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">tidy =</span> <span class="cn">TRUE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>, <span class="at">include =</span> correction)</span>
<span id="cb131-23"><a href="#cb131-23" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-24"><a href="#cb131-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-25"><a href="#cb131-25" aria-hidden="true" tabindex="-1"></a><span class="fu"># Objectifs</span></span>
<span id="cb131-26"><a href="#cb131-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-27"><a href="#cb131-27" aria-hidden="true" tabindex="-1"></a>Ce document donne tout d'abord quelques considérations sur l'importation de</span>
<span id="cb131-28"><a href="#cb131-28" aria-hidden="true" tabindex="-1"></a>données et sur les strucutres de bases de R, avant de donner quelques éléments</span>
<span id="cb131-29"><a href="#cb131-29" aria-hidden="true" tabindex="-1"></a>introductifs sur l'utilisation du package <span class="in">`dplyr`</span>.</span>
<span id="cb131-30"><a href="#cb131-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-31"><a href="#cb131-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-32"><a href="#cb131-32" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction à `dplyr`</span></span>
<span id="cb131-33"><a href="#cb131-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-34"><a href="#cb131-34" aria-hidden="true" tabindex="-1"></a>Il existe un très grand nombre de packages additionnels dans <span class="in">`r fontawesome::fa('r-project')`</span>. Certains</span>
<span id="cb131-35"><a href="#cb131-35" aria-hidden="true" tabindex="-1"></a>apportent de nouvelles fonctionnalités (méthodes statistiques qui n'étaient pas</span>
<span id="cb131-36"><a href="#cb131-36" aria-hidden="true" tabindex="-1"></a>disponible auparavant), et d'autres apportent des améliorations à des</span>
<span id="cb131-37"><a href="#cb131-37" aria-hidden="true" tabindex="-1"></a>fonctionnalités déjà présentes dans <span class="in">`r fontawesome::fa('r-project')`</span>.</span>
<span id="cb131-38"><a href="#cb131-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-39"><a href="#cb131-39" aria-hidden="true" tabindex="-1"></a>Le package <span class="in">`dplyr`</span> rentre essentiellement dans la 2^ème^ catégorie. Il propose</span>
<span id="cb131-40"><a href="#cb131-40" aria-hidden="true" tabindex="-1"></a>de re-définir la manipulation de données dans R, avec une syntaxe plus simple,</span>
<span id="cb131-41"><a href="#cb131-41" aria-hidden="true" tabindex="-1"></a>tout en améliorant les performances lorsqu'on gère des grands tableaux de</span>
<span id="cb131-42"><a href="#cb131-42" aria-hidden="true" tabindex="-1"></a>données.</span>
<span id="cb131-43"><a href="#cb131-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-44"><a href="#cb131-44" aria-hidden="true" tabindex="-1"></a>Installer le package <span class="in">`dplyr`</span> puis le charger :</span>
<span id="cb131-45"><a href="#cb131-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-46"><a href="#cb131-46" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-47"><a href="#cb131-47" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("dplyr")</span></span>
<span id="cb131-48"><a href="#cb131-48" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb131-49"><a href="#cb131-49" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-50"><a href="#cb131-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-51"><a href="#cb131-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-52"><a href="#cb131-52" aria-hidden="true" tabindex="-1"></a><span class="fu">## Gestion de fichiers de données</span></span>
<span id="cb131-53"><a href="#cb131-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-54"><a href="#cb131-54" aria-hidden="true" tabindex="-1"></a>Avant de se lancer dans l'utilisation de <span class="in">`dplyr`</span>, nous allons revoir quelques</span>
<span id="cb131-55"><a href="#cb131-55" aria-hidden="true" tabindex="-1"></a>principes dans la gestion des fichiers de données sous <span class="in">`r fontawesome::fa('r-project')`</span>.</span>
<span id="cb131-56"><a href="#cb131-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-57"><a href="#cb131-57" aria-hidden="true" tabindex="-1"></a><span class="fu">### Importation</span></span>
<span id="cb131-58"><a href="#cb131-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-59"><a href="#cb131-59" aria-hidden="true" tabindex="-1"></a>Le plus simple pour importer des données est d'utiliser l'outil graphique de</span>
<span id="cb131-60"><a href="#cb131-60" aria-hidden="true" tabindex="-1"></a>Rstudio "Import Dataset", présent dans l'onglet "Environnement" ou dans le</span>
<span id="cb131-61"><a href="#cb131-61" aria-hidden="true" tabindex="-1"></a>menu "File".</span>
<span id="cb131-62"><a href="#cb131-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-63"><a href="#cb131-63" aria-hidden="true" tabindex="-1"></a>Sinon, on peut bien entendu utiliser la fonction <span class="in">`read.table()`</span> et ses dérivées</span>
<span id="cb131-64"><a href="#cb131-64" aria-hidden="true" tabindex="-1"></a>(<span class="in">`read.csv()`</span>, <span class="in">`read.delim()`</span>...).</span>
<span id="cb131-65"><a href="#cb131-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-66"><a href="#cb131-66" aria-hidden="true" tabindex="-1"></a>Importer le fichier <span class="in">`naissance.txt`</span>, puis regarder la structure du tableau créé</span>
<span id="cb131-67"><a href="#cb131-67" aria-hidden="true" tabindex="-1"></a>via la fonction <span class="in">`str()`</span>.</span>
<span id="cb131-68"><a href="#cb131-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-69"><a href="#cb131-69" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=correction}</span></span>
<span id="cb131-70"><a href="#cb131-70" aria-hidden="true" tabindex="-1"></a>naissance <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"naissance.txt"</span>)</span>
<span id="cb131-71"><a href="#cb131-71" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance)</span>
<span id="cb131-72"><a href="#cb131-72" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-73"><a href="#cb131-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-74"><a href="#cb131-74" aria-hidden="true" tabindex="-1"></a><span class="in">`r fontawesome::fa('r-project')`</span> considère toutes les variables comme des suite de nombres</span>
<span id="cb131-75"><a href="#cb131-75" aria-hidden="true" tabindex="-1"></a>entiers (car effectivement il n'y a pas de nombres à virgule), ce qui est</span>
<span id="cb131-76"><a href="#cb131-76" aria-hidden="true" tabindex="-1"></a>correcte pour les variables quantitatives (comme l'âge ou encore le poids de</span>
<span id="cb131-77"><a href="#cb131-77" aria-hidden="true" tabindex="-1"></a>l'enfant <span class="in">`BWT`</span>). Par contre, certaines variables sont qualitatives (comme</span>
<span id="cb131-78"><a href="#cb131-78" aria-hidden="true" tabindex="-1"></a><span class="in">`SMOKE`</span>), donc si on veut des facteurs, il faut le forcer.</span>
<span id="cb131-79"><a href="#cb131-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-80"><a href="#cb131-80" aria-hidden="true" tabindex="-1"></a>Transformer la variable <span class="in">`SMOKE`</span> en facteur, et renommer les niveaux en "Non-Fumeur" (0 dans le fichier txt) et "Fumeur" (1 dans le fichier txt).</span>
<span id="cb131-81"><a href="#cb131-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-82"><a href="#cb131-82" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=correction}</span></span>
<span id="cb131-83"><a href="#cb131-83" aria-hidden="true" tabindex="-1"></a>naissance<span class="sc">$</span>SMOKE <span class="ot">&lt;-</span> <span class="fu">factor</span>(naissance<span class="sc">$</span>SMOKE, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Non-Fumeur"</span>, <span class="st">"Fumeur"</span>))</span>
<span id="cb131-84"><a href="#cb131-84" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance)</span>
<span id="cb131-85"><a href="#cb131-85" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-86"><a href="#cb131-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-87"><a href="#cb131-87" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exercice 0 :</span></span>
<span id="cb131-88"><a href="#cb131-88" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb131-89"><a href="#cb131-89" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Charger le fichier de données nommé <span class="in">`naissance_na.txt`</span>.</span>
<span id="cb131-90"><a href="#cb131-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-93"><a href="#cb131-93" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-94"><a href="#cb131-94" aria-hidden="true" tabindex="-1"></a>naissance_na <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"naissance_na.txt"</span>, <span class="at">sep=</span><span class="st">";"</span>)</span>
<span id="cb131-95"><a href="#cb131-95" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-96"><a href="#cb131-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-97"><a href="#cb131-97" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Consulter la structure de l'objet créé (par exemple nommé <span class="in">`naissance_na`</span>).</span>
<span id="cb131-98"><a href="#cb131-98" aria-hidden="true" tabindex="-1"></a>Que remarquez-vous pour la variable <span class="in">`LWT`</span> ?</span>
<span id="cb131-99"><a href="#cb131-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-100"><a href="#cb131-100" aria-hidden="true" tabindex="-1"></a><span class="in">```{r strNA}</span></span>
<span id="cb131-101"><a href="#cb131-101" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance_na)</span>
<span id="cb131-102"><a href="#cb131-102" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-103"><a href="#cb131-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-104"><a href="#cb131-104" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Pour régler le problème, modifier le contenu de la case "NA.strings" lors</span>
<span id="cb131-105"><a href="#cb131-105" aria-hidden="true" tabindex="-1"></a>du chargement du fichier de données avec "Import Dataset" (ou modifier le paramètre <span class="in">`na.strings`</span> de la fonction <span class="in">`read.table()`</span> ou de ses dérivées). Puis vérifier la nouvelle structure de l'objet.</span>
<span id="cb131-106"><a href="#cb131-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-107"><a href="#cb131-107" aria-hidden="true" tabindex="-1"></a><span class="in">```{r importNA}</span></span>
<span id="cb131-108"><a href="#cb131-108" aria-hidden="true" tabindex="-1"></a>naissance_na <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"naissance_na.txt"</span>, <span class="at">sep=</span><span class="st">";"</span>, <span class="at">na.strings =</span> <span class="st">"."</span>)</span>
<span id="cb131-109"><a href="#cb131-109" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance_na)</span>
<span id="cb131-110"><a href="#cb131-110" aria-hidden="true" tabindex="-1"></a><span class="in">```</span> </span>
<span id="cb131-111"><a href="#cb131-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-112"><a href="#cb131-112" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>A l'aide de la fonction <span class="in">`transform()`</span>, transformer en facteur les variables <span class="in">`RACE`</span> (1=blanche, 2=noire, 3=autres), <span class="in">`HT`</span> (0=non, 1=oui) et <span class="in">`UI`</span> (0=non, 1=oui) en une seule commande.</span>
<span id="cb131-113"><a href="#cb131-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-114"><a href="#cb131-114" aria-hidden="true" tabindex="-1"></a><span class="in">```{r transformNA, tidy=FALSE}</span></span>
<span id="cb131-115"><a href="#cb131-115" aria-hidden="true" tabindex="-1"></a>naissance_na <span class="ot">&lt;-</span> <span class="fu">transform</span>(naissance_na,</span>
<span id="cb131-116"><a href="#cb131-116" aria-hidden="true" tabindex="-1"></a>    <span class="at">RACE =</span> <span class="fu">factor</span>(RACE, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"blanche"</span>, <span class="st">"noire"</span>, <span class="st">"autres"</span>)),</span>
<span id="cb131-117"><a href="#cb131-117" aria-hidden="true" tabindex="-1"></a>    <span class="at">HT =</span> <span class="fu">factor</span>(HT, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"non"</span>, <span class="st">"oui"</span>)),</span>
<span id="cb131-118"><a href="#cb131-118" aria-hidden="true" tabindex="-1"></a>    <span class="at">UI =</span> <span class="fu">factor</span>(UI, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"non"</span>, <span class="st">"oui"</span>)))</span>
<span id="cb131-119"><a href="#cb131-119" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance_na)</span>
<span id="cb131-120"><a href="#cb131-120" aria-hidden="true" tabindex="-1"></a><span class="in">```</span> </span>
<span id="cb131-121"><a href="#cb131-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-122"><a href="#cb131-122" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Toujours à l'aide de la fonction <span class="in">`transform()`</span>, créer deux nouvelles variables (utiliser deux commandes différentes, puis essayer en une seule fois) :</span>
<span id="cb131-123"><a href="#cb131-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-124"><a href="#cb131-124" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span><span class="in">`POIDS`</span>, contenant le poids de la mère en g (1 livre = 453 g).</span>
<span id="cb131-125"><a href="#cb131-125" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb131-126"><a href="#cb131-126" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span><span class="in">`RAPPORT`</span>, contenant le rapport entre le poids de l'enfant et celui de la</span>
<span id="cb131-127"><a href="#cb131-127" aria-hidden="true" tabindex="-1"></a>       mère (en grammes tous les deux).</span>
<span id="cb131-128"><a href="#cb131-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-129"><a href="#cb131-129" aria-hidden="true" tabindex="-1"></a><span class="in">```{r transformNA2, error=TRUE, eval=correction}</span></span>
<span id="cb131-130"><a href="#cb131-130" aria-hidden="true" tabindex="-1"></a>naissance_na <span class="ot">&lt;-</span> <span class="fu">transform</span>(naissance_na, <span class="at">POIDS =</span> LWT <span class="sc">*</span> <span class="dv">453</span>, <span class="at">RAPPORT =</span> BWT<span class="sc">/</span>POIDS)</span>
<span id="cb131-131"><a href="#cb131-131" aria-hidden="true" tabindex="-1"></a>naissance_na <span class="ot">&lt;-</span> <span class="fu">transform</span>(naissance_na, <span class="at">POIDS =</span> LWT <span class="sc">*</span> <span class="dv">453</span>)</span>
<span id="cb131-132"><a href="#cb131-132" aria-hidden="true" tabindex="-1"></a>naissance_na <span class="ot">&lt;-</span> <span class="fu">transform</span>(naissance_na, <span class="at">RAPPORT =</span> BWT<span class="sc">/</span>POIDS)</span>
<span id="cb131-133"><a href="#cb131-133" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance_na)</span>
<span id="cb131-134"><a href="#cb131-134" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-135"><a href="#cb131-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-136"><a href="#cb131-136" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>Utiliser la fonction <span class="in">`dplyr::mutate()`</span> (du package <span class="in">`dplyr`</span>) pour répondre à la question précédente en une seule commande.</span>
<span id="cb131-137"><a href="#cb131-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-138"><a href="#cb131-138" aria-hidden="true" tabindex="-1"></a><span class="in">```{r mutateNA}</span></span>
<span id="cb131-139"><a href="#cb131-139" aria-hidden="true" tabindex="-1"></a>naissance_na <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(naissance_na, <span class="at">POIDS2 =</span> LWT <span class="sc">*</span> <span class="dv">453</span>, <span class="at">RAPPORT2 =</span> BWT<span class="sc">/</span>POIDS2)</span>
<span id="cb131-140"><a href="#cb131-140" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance_na)</span>
<span id="cb131-141"><a href="#cb131-141" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-142"><a href="#cb131-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-143"><a href="#cb131-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-144"><a href="#cb131-144" aria-hidden="true" tabindex="-1"></a><span class="fu">### Exportation</span></span>
<span id="cb131-145"><a href="#cb131-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-146"><a href="#cb131-146" aria-hidden="true" tabindex="-1"></a>Pour écrire une table de données, on utilise la fonction <span class="in">`write.table()`</span> ou ses dérivées.</span>
<span id="cb131-147"><a href="#cb131-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-148"><a href="#cb131-148" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-149"><a href="#cb131-149" aria-hidden="true" tabindex="-1"></a>mon_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"Partie"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Intro"</span>, <span class="st">"Bases"</span>, <span class="st">"Manip"</span>), <span class="st">"Temps"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span>))</span>
<span id="cb131-150"><a href="#cb131-150" aria-hidden="true" tabindex="-1"></a>mon_df</span>
<span id="cb131-151"><a href="#cb131-151" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(mon_df, <span class="at">file =</span> <span class="st">"mon_df.csv"</span>)</span>
<span id="cb131-152"><a href="#cb131-152" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-153"><a href="#cb131-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-154"><a href="#cb131-154" aria-hidden="true" tabindex="-1"></a><span class="fu">### Sauvegarde</span></span>
<span id="cb131-155"><a href="#cb131-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-156"><a href="#cb131-156" aria-hidden="true" tabindex="-1"></a>On peut aussi sauvegarder une table au format <span class="in">`Rdata`</span> (qui est un format propre à R). Pour cela on utilise <span class="in">`save()`</span> :</span>
<span id="cb131-157"><a href="#cb131-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-158"><a href="#cb131-158" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-159"><a href="#cb131-159" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(naissance, <span class="at">file =</span> <span class="st">"naissance.Rdata"</span>)</span>
<span id="cb131-160"><a href="#cb131-160" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-161"><a href="#cb131-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-162"><a href="#cb131-162" aria-hidden="true" tabindex="-1"></a>L'avantage est que lorsqu'on recharge le fichier avec la fonction <span class="in">`load()`</span>, il garde la bonne structure :</span>
<span id="cb131-163"><a href="#cb131-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-164"><a href="#cb131-164" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-165"><a href="#cb131-165" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(naissance)</span>
<span id="cb131-166"><a href="#cb131-166" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"naissance.Rdata"</span>)</span>
<span id="cb131-167"><a href="#cb131-167" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance)</span>
<span id="cb131-168"><a href="#cb131-168" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-169"><a href="#cb131-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-170"><a href="#cb131-170" aria-hidden="true" tabindex="-1"></a>On remarque qu'on a pas besoin d'affecter le résultat de <span class="in">`load()`</span> à un objet.</span>
<span id="cb131-171"><a href="#cb131-171" aria-hidden="true" tabindex="-1"></a>Ceci est dû au fait, qu'on peut sauvegarder plusieurs objets de la session</span>
<span id="cb131-172"><a href="#cb131-172" aria-hidden="true" tabindex="-1"></a>dans un même fichier <span class="in">`.Rdata`</span>. Et on pourra tous les recharger ensuite :</span>
<span id="cb131-173"><a href="#cb131-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-174"><a href="#cb131-174" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE, error=TRUE}</span></span>
<span id="cb131-175"><a href="#cb131-175" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(naissance, mon_df, <span class="at">file =</span> <span class="st">"naissance_mon_df.Rdata"</span>)</span>
<span id="cb131-176"><a href="#cb131-176" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(naissance, mon_df)</span>
<span id="cb131-177"><a href="#cb131-177" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mon_df)</span>
<span id="cb131-178"><a href="#cb131-178" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"naissance_mon_df.Rdata"</span>)</span>
<span id="cb131-179"><a href="#cb131-179" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mon_df)</span>
<span id="cb131-180"><a href="#cb131-180" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-181"><a href="#cb131-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-182"><a href="#cb131-182" aria-hidden="true" tabindex="-1"></a>Ce comportement est pratique, mais peut parfois s'avérer trompeur. Si on a</span>
<span id="cb131-183"><a href="#cb131-183" aria-hidden="true" tabindex="-1"></a>beaucoup d'objets dans notre environnement, et qu'on charge un objet</span>
<span id="cb131-184"><a href="#cb131-184" aria-hidden="true" tabindex="-1"></a><span class="in">`.Rdata`</span> avec plusieurs objets (dont on ne se souvient pas, ou dont on ne connaît pas le nom), il est difficile de s'y retrouver. De plus, lors du chargement, <span class="in">`r fontawesome::fa('r-project')`</span> peut écraser des objets déjà présents avec le même nom.  </span>
<span id="cb131-185"><a href="#cb131-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-186"><a href="#cb131-186" aria-hidden="true" tabindex="-1"></a>**Conseil** : mettre tout ce qu'on veut sauver dans une liste, et sauver cette</span>
<span id="cb131-187"><a href="#cb131-187" aria-hidden="true" tabindex="-1"></a>liste sous format <span class="in">`.Rdata`</span> en gardant le même nom :</span>
<span id="cb131-188"><a href="#cb131-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-189"><a href="#cb131-189" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-190"><a href="#cb131-190" aria-hidden="true" tabindex="-1"></a>naissance_mon_df <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"naissance"</span> <span class="ot">=</span> naissance, <span class="st">"mon_df"</span> <span class="ot">=</span> mon_df)</span>
<span id="cb131-191"><a href="#cb131-191" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(naissance_mon_df, <span class="at">file =</span> <span class="st">"naissance_mon_df.Rdata"</span>)</span>
<span id="cb131-192"><a href="#cb131-192" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(naissance_mon_df)</span>
<span id="cb131-193"><a href="#cb131-193" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"naissance_mon_df.Rdata"</span>)</span>
<span id="cb131-194"><a href="#cb131-194" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-195"><a href="#cb131-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-196"><a href="#cb131-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-197"><a href="#cb131-197" aria-hidden="true" tabindex="-1"></a><span class="fu">## Opérations sur les tableaux de données</span></span>
<span id="cb131-198"><a href="#cb131-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-199"><a href="#cb131-199" aria-hidden="true" tabindex="-1"></a><span class="fu">### Sélection, suppression, ajout</span></span>
<span id="cb131-200"><a href="#cb131-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-201"><a href="#cb131-201" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exercice 1 : Sélection de colonnes</span></span>
<span id="cb131-202"><a href="#cb131-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-203"><a href="#cb131-203" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>J'ai dénombré 10 façons de sélectionner la variable <span class="in">`AGE`</span>. En gardant en tête</span>
<span id="cb131-204"><a href="#cb131-204" aria-hidden="true" tabindex="-1"></a>qu'un <span class="in">`data.frame`</span> est une liste de colonnes, essayer d'en trouver un maximum.</span>
<span id="cb131-205"><a href="#cb131-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-208"><a href="#cb131-208" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-209"><a href="#cb131-209" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour sélectionner une colonne, on peut utiliser l'aspect "liste" du `data.frame`, avec le `$`</span></span>
<span id="cb131-210"><a href="#cb131-210" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance<span class="sc">$</span>AGE)</span>
<span id="cb131-211"><a href="#cb131-211" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(naissance<span class="sc">$</span>AGE)</span>
<span id="cb131-212"><a href="#cb131-212" aria-hidden="true" tabindex="-1"></a><span class="co"># Le `$` extrait la composante de la liste `naissance` nommée `AGE`.</span></span>
<span id="cb131-213"><a href="#cb131-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-214"><a href="#cb131-214" aria-hidden="true" tabindex="-1"></a><span class="co"># Toujours côté "liste", on peut également utiliser le `[[]]`, qui exécute la même opération, et qui peut s'utiliser avec le numéro de la variable à la place du nom :</span></span>
<span id="cb131-215"><a href="#cb131-215" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance[[<span class="dv">2</span>]])</span>
<span id="cb131-216"><a href="#cb131-216" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance[[<span class="st">"AGE"</span>]])</span>
<span id="cb131-217"><a href="#cb131-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-218"><a href="#cb131-218" aria-hidden="true" tabindex="-1"></a><span class="co"># Dernière façon "liste", utiliser le `[]`, car une liste est un vecteur :</span></span>
<span id="cb131-219"><a href="#cb131-219" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance[<span class="dv">2</span>])</span>
<span id="cb131-220"><a href="#cb131-220" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(naissance[<span class="dv">2</span>])</span>
<span id="cb131-221"><a href="#cb131-221" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance[<span class="st">"AGE"</span>])</span>
<span id="cb131-222"><a href="#cb131-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-223"><a href="#cb131-223" aria-hidden="true" tabindex="-1"></a><span class="co"># Nous voyons, que contrairement à avant où nous avions extrait un vecteur, nous avons ici extrait un sous-dataframe (ou encore une sous-liste). Ce dernier point est important à garder en tête, car il peut être source de nombreux bugs...</span></span>
<span id="cb131-224"><a href="#cb131-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-225"><a href="#cb131-225" aria-hidden="true" tabindex="-1"></a><span class="co"># On peut aussi utiliser le côté "matrice" du dataframe, avec le `[,]` :</span></span>
<span id="cb131-226"><a href="#cb131-226" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance[, <span class="dv">2</span>])</span>
<span id="cb131-227"><a href="#cb131-227" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance[, <span class="st">"AGE"</span>])</span>
<span id="cb131-228"><a href="#cb131-228" aria-hidden="true" tabindex="-1"></a><span class="co"># Ici nous avons extrait la colonne numéro 2 de la "matrice". Par contre, **ce n'est plus un dataframe !**</span></span>
<span id="cb131-229"><a href="#cb131-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-230"><a href="#cb131-230" aria-hidden="true" tabindex="-1"></a><span class="co"># Si on souhaite garder la structure de dataframe, il faut rajouter l'option `drop = FALSE` :</span></span>
<span id="cb131-231"><a href="#cb131-231" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance[, <span class="dv">2</span>, <span class="at">drop =</span> <span class="cn">FALSE</span>])</span>
<span id="cb131-232"><a href="#cb131-232" aria-hidden="true" tabindex="-1"></a><span class="co">#!!! </span><span class="al">ATTENTION</span><span class="co"> : Ce comportement est connu comme étant une source d'erreurs fréquente dans R quand on programme ses propres fonctions !!!**</span></span>
<span id="cb131-233"><a href="#cb131-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-234"><a href="#cb131-234" aria-hidden="true" tabindex="-1"></a><span class="co"># Sinon, on peut utiliser la fonction `subset()` :</span></span>
<span id="cb131-235"><a href="#cb131-235" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">subset</span>(naissance, <span class="at">select =</span> <span class="dv">2</span>))</span>
<span id="cb131-236"><a href="#cb131-236" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">subset</span>(naissance, <span class="at">select =</span> <span class="st">"AGE"</span>))</span>
<span id="cb131-237"><a href="#cb131-237" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">subset</span>(naissance, <span class="at">select =</span> AGE))</span>
<span id="cb131-238"><a href="#cb131-238" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-239"><a href="#cb131-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-240"><a href="#cb131-240" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Utiliser la fonction <span class="in">`select`</span> du package <span class="in">`dplyr`</span> pour sélectionner la</span>
<span id="cb131-241"><a href="#cb131-241" aria-hidden="true" tabindex="-1"></a>variable <span class="in">`AGE`</span> et regarder comment elle se comporte.</span>
<span id="cb131-242"><a href="#cb131-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-245"><a href="#cb131-245" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-246"><a href="#cb131-246" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dplyr<span class="sc">::</span><span class="fu">select</span>(naissance, <span class="dv">2</span>))</span>
<span id="cb131-247"><a href="#cb131-247" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dplyr<span class="sc">::</span><span class="fu">select</span>(naissance, AGE))</span>
<span id="cb131-248"><a href="#cb131-248" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-249"><a href="#cb131-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-250"><a href="#cb131-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-251"><a href="#cb131-251" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exercice 2 : Sélection de plusieurs colonnes</span></span>
<span id="cb131-252"><a href="#cb131-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-253"><a href="#cb131-253" aria-hidden="true" tabindex="-1"></a>Essayer tous les commandes précédentes pour extraire, en même temps, </span>
<span id="cb131-254"><a href="#cb131-254" aria-hidden="true" tabindex="-1"></a>les 4 colonnes <span class="in">`ID`</span>, <span class="in">`AGE`</span>, <span class="in">`LWT`</span> et <span class="in">`SMOKE`</span>.</span>
<span id="cb131-255"><a href="#cb131-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-256"><a href="#cb131-256" aria-hidden="true" tabindex="-1"></a><span class="in">```{r 4columns, results='hide'}</span></span>
<span id="cb131-257"><a href="#cb131-257" aria-hidden="true" tabindex="-1"></a><span class="co">#naissance$c("ID", "AGE", "LWT", "SMOKE")</span></span>
<span id="cb131-258"><a href="#cb131-258" aria-hidden="true" tabindex="-1"></a><span class="co">#naissance[[c(1:3, 5)]]</span></span>
<span id="cb131-259"><a href="#cb131-259" aria-hidden="true" tabindex="-1"></a><span class="co">#naissance[[c("ID", "AGE", "LWT", "SMOKE")]]</span></span>
<span id="cb131-260"><a href="#cb131-260" aria-hidden="true" tabindex="-1"></a>naissance[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">5</span>)]</span>
<span id="cb131-261"><a href="#cb131-261" aria-hidden="true" tabindex="-1"></a>naissance[<span class="fu">c</span>(<span class="st">"ID"</span>, <span class="st">"AGE"</span>, <span class="st">"LWT"</span>, <span class="st">"SMOKE"</span>)]</span>
<span id="cb131-262"><a href="#cb131-262" aria-hidden="true" tabindex="-1"></a>naissance[,<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">5</span>)]</span>
<span id="cb131-263"><a href="#cb131-263" aria-hidden="true" tabindex="-1"></a>naissance[, <span class="fu">c</span>(<span class="st">"ID"</span>, <span class="st">"AGE"</span>, <span class="st">"LWT"</span>, <span class="st">"SMOKE"</span>)]</span>
<span id="cb131-264"><a href="#cb131-264" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(naissance, <span class="at">select =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">5</span>))</span>
<span id="cb131-265"><a href="#cb131-265" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(naissance, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"ID"</span>, <span class="st">"AGE"</span>, <span class="st">"LWT"</span>, <span class="st">"SMOKE"</span>))</span>
<span id="cb131-266"><a href="#cb131-266" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(naissance, <span class="at">select =</span> <span class="fu">c</span>(ID, AGE, LWT, SMOKE))</span>
<span id="cb131-267"><a href="#cb131-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-268"><a href="#cb131-268" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(naissance, ID, AGE, LWT, SMOKE)</span>
<span id="cb131-269"><a href="#cb131-269" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-270"><a href="#cb131-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-271"><a href="#cb131-271" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exercice 3 : Sélection de lignes</span></span>
<span id="cb131-272"><a href="#cb131-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-273"><a href="#cb131-273" aria-hidden="true" tabindex="-1"></a>Sélectionner les 5 premières lignes, puis les 5 dernières lignes (en 2</span>
<span id="cb131-274"><a href="#cb131-274" aria-hidden="true" tabindex="-1"></a>commandes) en utilisant une commande de base puis la fonction <span class="in">`dplyr::slice()`</span>. Afficher le résultat dans une *jolie* table grâce à la fonction <span class="in">`kable()`</span>du package <span class="in">`knitr`</span>.</span>
<span id="cb131-275"><a href="#cb131-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-278"><a href="#cb131-278" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-279"><a href="#cb131-279" aria-hidden="true" tabindex="-1"></a><span class="co"># En ce qui concerne les lignes, nous sommes obligés de considérer l'aspect "matrice" du dataframe :</span></span>
<span id="cb131-280"><a href="#cb131-280" aria-hidden="true" tabindex="-1"></a>premiers <span class="ot">&lt;-</span> naissance[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb131-281"><a href="#cb131-281" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(naissance)</span>
<span id="cb131-282"><a href="#cb131-282" aria-hidden="true" tabindex="-1"></a>derniers <span class="ot">&lt;-</span> naissance[(n<span class="dv">-5</span>)<span class="sc">:</span>n,]</span>
<span id="cb131-283"><a href="#cb131-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-284"><a href="#cb131-284" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec la fonction `dplyr::slice()` :</span></span>
<span id="cb131-285"><a href="#cb131-285" aria-hidden="true" tabindex="-1"></a>prems <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(naissance, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb131-286"><a href="#cb131-286" aria-hidden="true" tabindex="-1"></a>derns <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(naissance, (<span class="fu">n</span>()<span class="sc">-</span><span class="dv">5</span>)<span class="sc">:</span>n)</span>
<span id="cb131-287"><a href="#cb131-287" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(dplyr<span class="sc">::</span><span class="fu">slice</span>(naissance, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">nrow</span>(naissance)<span class="sc">-</span><span class="dv">4</span><span class="sc">:</span><span class="dv">0</span>)))</span>
<span id="cb131-288"><a href="#cb131-288" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-289"><a href="#cb131-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-290"><a href="#cb131-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-291"><a href="#cb131-291" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exercice 4 : Filtre</span></span>
<span id="cb131-292"><a href="#cb131-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-293"><a href="#cb131-293" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Construire un sous-dataframe ne contenant que les individus fumeurs, en</span>
<span id="cb131-294"><a href="#cb131-294" aria-hidden="true" tabindex="-1"></a>utilisant <span class="in">`[,]`</span>, puis <span class="in">`subset()`</span>, et enfin <span class="in">`dplyr::filter()`</span>.</span>
<span id="cb131-295"><a href="#cb131-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-298"><a href="#cb131-298" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-299"><a href="#cb131-299" aria-hidden="true" tabindex="-1"></a>fum <span class="ot">&lt;-</span> naissance[naissance<span class="sc">$</span>SMOKE <span class="sc">==</span> <span class="st">"Fumeur"</span>, ]</span>
<span id="cb131-300"><a href="#cb131-300" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(fum)</span>
<span id="cb131-301"><a href="#cb131-301" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fum<span class="sc">$</span>SMOKE)</span>
<span id="cb131-302"><a href="#cb131-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-303"><a href="#cb131-303" aria-hidden="true" tabindex="-1"></a><span class="co">#La table `fum` ne contient que les individus fumeurs. On peut aussi utiliser la fonction `which()`, qui renvoie les indices des individus qui vérifient la condition :</span></span>
<span id="cb131-304"><a href="#cb131-304" aria-hidden="true" tabindex="-1"></a>ind_fum <span class="ot">&lt;-</span> <span class="fu">which</span>(naissance<span class="sc">$</span>SMOKE <span class="sc">==</span> <span class="st">"Fumeur"</span>)</span>
<span id="cb131-305"><a href="#cb131-305" aria-hidden="true" tabindex="-1"></a>ind_fum</span>
<span id="cb131-306"><a href="#cb131-306" aria-hidden="true" tabindex="-1"></a>fum2 <span class="ot">&lt;-</span> naissance[ind_fum,]</span>
<span id="cb131-307"><a href="#cb131-307" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(fum2)</span>
<span id="cb131-308"><a href="#cb131-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-309"><a href="#cb131-309" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec `subset()`</span></span>
<span id="cb131-310"><a href="#cb131-310" aria-hidden="true" tabindex="-1"></a>fum_sub <span class="ot">&lt;-</span> <span class="fu">subset</span>(naissance, SMOKE <span class="sc">==</span> <span class="st">"Fumeur"</span>)</span>
<span id="cb131-311"><a href="#cb131-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-312"><a href="#cb131-312" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec `dplyr::filter()` :</span></span>
<span id="cb131-313"><a href="#cb131-313" aria-hidden="true" tabindex="-1"></a>fum_fil <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(naissance, SMOKE <span class="sc">==</span> <span class="st">"Fumeur"</span>)</span>
<span id="cb131-314"><a href="#cb131-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-315"><a href="#cb131-315" aria-hidden="true" tabindex="-1"></a><span class="co">#Les deux syntaxes ici sont identiques. La différence est que dans dplyr il y a deux fonctions (`select()` et `filter()`) avec une syntaxe très simple.</span></span>
<span id="cb131-316"><a href="#cb131-316" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-317"><a href="#cb131-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-318"><a href="#cb131-318" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Donner les identifiants (colonne <span class="in">`ID`</span>) des individus des individus présentant de l'hypertension (variable <span class="in">`HT`</span> valant 1).</span>
<span id="cb131-319"><a href="#cb131-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-322"><a href="#cb131-322" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-323"><a href="#cb131-323" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(dplyr<span class="sc">::</span><span class="fu">filter</span>(naissance, HT <span class="sc">==</span> <span class="dv">1</span>), <span class="st">"ID"</span>)</span>
<span id="cb131-324"><a href="#cb131-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-325"><a href="#cb131-325" aria-hidden="true" tabindex="-1"></a><span class="co"># avec le pipe :</span></span>
<span id="cb131-326"><a href="#cb131-326" aria-hidden="true" tabindex="-1"></a>naissance <span class="sc">%&gt;%</span></span>
<span id="cb131-327"><a href="#cb131-327" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(HT <span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-328"><a href="#cb131-328" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">"ID"</span>)</span>
<span id="cb131-329"><a href="#cb131-329" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-330"><a href="#cb131-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-331"><a href="#cb131-331" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Sélectionner le sous-dataframe ne contenant que les individus fumeurs et âgés de moins de 20 ans.</span>
<span id="cb131-332"><a href="#cb131-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-335"><a href="#cb131-335" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-336"><a href="#cb131-336" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">filter</span>(naissance, SMOKE <span class="sc">==</span> <span class="st">"Fumeur"</span>, AGE <span class="sc">&lt;</span> <span class="dv">20</span>)</span>
<span id="cb131-337"><a href="#cb131-337" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-338"><a href="#cb131-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-339"><a href="#cb131-339" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Donner les indices des individus ayant un poids inférieur à 110 (le poids de la mère est en livres) ou ayant un bébé de poids inférieur à 2,5 kg.</span>
<span id="cb131-340"><a href="#cb131-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-343"><a href="#cb131-343" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-344"><a href="#cb131-344" aria-hidden="true" tabindex="-1"></a>naissance <span class="sc">%&gt;%</span></span>
<span id="cb131-345"><a href="#cb131-345" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(LWT <span class="sc">&lt;</span> <span class="dv">110</span> <span class="sc">|</span> BWT <span class="sc">&lt;</span> <span class="dv">2500</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-346"><a href="#cb131-346" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">"ID"</span>, <span class="st">"LWT"</span>, <span class="st">"BWT"</span>)</span>
<span id="cb131-347"><a href="#cb131-347" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-348"><a href="#cb131-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-349"><a href="#cb131-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-350"><a href="#cb131-350" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exercice 5 : Suppression de lignes ou de colonnes</span></span>
<span id="cb131-351"><a href="#cb131-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-352"><a href="#cb131-352" aria-hidden="true" tabindex="-1"></a>En essayant avec <span class="in">`[,]`</span>, <span class="in">`subset()`</span> et les fonctions de <span class="in">`dplyr`</span> :</span>
<span id="cb131-353"><a href="#cb131-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-354"><a href="#cb131-354" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Supprimer la première ligne du jeu de données.</span>
<span id="cb131-355"><a href="#cb131-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-356"><a href="#cb131-356" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Supprimer les colonnes "AGE", "LWT", "RACE", "BWT".</span>
<span id="cb131-357"><a href="#cb131-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-358"><a href="#cb131-358" aria-hidden="true" tabindex="-1"></a>*Indice : utiliser la même syntaxe que pour la sélection mais avec le signe `-` pour indiquer les éléments à supprimer...*</span>
<span id="cb131-359"><a href="#cb131-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-362"><a href="#cb131-362" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-363"><a href="#cb131-363" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour supprimer des lignes ou des colonnes, on peut utiliser `[,]` :</span></span>
<span id="cb131-364"><a href="#cb131-364" aria-hidden="true" tabindex="-1"></a>naissance_sans_ind1 <span class="ot">&lt;-</span> naissance[<span class="sc">-</span><span class="dv">1</span>, ]</span>
<span id="cb131-365"><a href="#cb131-365" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(naissance_sans_ind1)</span>
<span id="cb131-366"><a href="#cb131-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-367"><a href="#cb131-367" aria-hidden="true" tabindex="-1"></a>naissance_suppr_cro <span class="ot">&lt;-</span> naissance[, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">10</span>)]</span>
<span id="cb131-368"><a href="#cb131-368" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(naissance_suppr_cro)</span>
<span id="cb131-369"><a href="#cb131-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-370"><a href="#cb131-370" aria-hidden="true" tabindex="-1"></a><span class="co">#naissance_sans_AGE &lt;- naissance[, -c("AGE", "LWT", "RACE", "BWT")]</span></span>
<span id="cb131-371"><a href="#cb131-371" aria-hidden="true" tabindex="-1"></a><span class="co"># Cette dernière opération n'est pas possible.</span></span>
<span id="cb131-372"><a href="#cb131-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-373"><a href="#cb131-373" aria-hidden="true" tabindex="-1"></a><span class="co"># Là encore, les fonctions `subset()` et `select()` permettent plus d'opérations avec une syntaxe très simple :</span></span>
<span id="cb131-374"><a href="#cb131-374" aria-hidden="true" tabindex="-1"></a>naissance_suprr_sub <span class="ot">&lt;-</span> <span class="fu">subset</span>(naissance, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(AGE<span class="sc">:</span>RACE, BWT))</span>
<span id="cb131-375"><a href="#cb131-375" aria-hidden="true" tabindex="-1"></a>naissance_suprr_sel <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(naissance, <span class="sc">-</span><span class="fu">c</span>(AGE<span class="sc">:</span>RACE, BWT))</span>
<span id="cb131-376"><a href="#cb131-376" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-377"><a href="#cb131-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-378"><a href="#cb131-378" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exercice 6 : Ajout de lignes ou de colonnes</span></span>
<span id="cb131-379"><a href="#cb131-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-380"><a href="#cb131-380" aria-hidden="true" tabindex="-1"></a>Ajouter un une ligne (un individu) possédant les valeurs suivantes :</span>
<span id="cb131-381"><a href="#cb131-381" aria-hidden="true" tabindex="-1"></a><span class="in">`1, 20, 143, 2, "Non-Fumeur", 0, 0, 0, 0, 2500`</span></span>
<span id="cb131-382"><a href="#cb131-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-385"><a href="#cb131-385" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-386"><a href="#cb131-386" aria-hidden="true" tabindex="-1"></a>naissance[<span class="fu">nrow</span>(naissance) <span class="sc">+</span> <span class="dv">1</span>, ] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="dv">143</span>, <span class="dv">2</span>, <span class="st">"Non-Fumeur"</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2500</span>)</span>
<span id="cb131-387"><a href="#cb131-387" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(naissance)</span>
<span id="cb131-388"><a href="#cb131-388" aria-hidden="true" tabindex="-1"></a><span class="co"># Apparemment tout va bien...</span></span>
<span id="cb131-389"><a href="#cb131-389" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance)</span>
<span id="cb131-390"><a href="#cb131-390" aria-hidden="true" tabindex="-1"></a><span class="co"># Mais on vient en fait de casser notre jeu de données...</span></span>
<span id="cb131-391"><a href="#cb131-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-392"><a href="#cb131-392" aria-hidden="true" tabindex="-1"></a>naissance <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"naissance.txt"</span>)</span>
<span id="cb131-393"><a href="#cb131-393" aria-hidden="true" tabindex="-1"></a>naissance<span class="sc">$</span>SMOKE <span class="ot">&lt;-</span> <span class="fu">factor</span>(naissance<span class="sc">$</span>SMOKE, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Non-Fumeur"</span>, <span class="st">"Fumeur"</span>))</span>
<span id="cb131-394"><a href="#cb131-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-395"><a href="#cb131-395" aria-hidden="true" tabindex="-1"></a>naissance[<span class="fu">nrow</span>(naissance) <span class="sc">+</span> <span class="dv">1</span>, ] <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="dv">143</span>, <span class="dv">2</span>, <span class="st">"Non-Fumeur"</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2500</span>)</span>
<span id="cb131-396"><a href="#cb131-396" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(naissance)</span>
<span id="cb131-397"><a href="#cb131-397" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance)</span>
<span id="cb131-398"><a href="#cb131-398" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-399"><a href="#cb131-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-400"><a href="#cb131-400" aria-hidden="true" tabindex="-1"></a>**NB**: On peut rajouter une colonne (une variable), à l'aide de <span class="in">`$`</span>, <span class="in">`transform()`</span> ou <span class="in">`mutate()`</span> (comme vu précédemment).</span>
<span id="cb131-401"><a href="#cb131-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-402"><a href="#cb131-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-403"><a href="#cb131-403" aria-hidden="true" tabindex="-1"></a><span class="fu">### Fusion</span></span>
<span id="cb131-404"><a href="#cb131-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-405"><a href="#cb131-405" aria-hidden="true" tabindex="-1"></a>La fonction <span class="in">`merge()`</span> permet de fusionner deux tableaux de données :</span>
<span id="cb131-406"><a href="#cb131-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-407"><a href="#cb131-407" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-408"><a href="#cb131-408" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(naissance)</span>
<span id="cb131-409"><a href="#cb131-409" aria-hidden="true" tabindex="-1"></a>nais1 <span class="ot">&lt;-</span> naissance[,<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span>
<span id="cb131-410"><a href="#cb131-410" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nais1)</span>
<span id="cb131-411"><a href="#cb131-411" aria-hidden="true" tabindex="-1"></a>nais2 <span class="ot">&lt;-</span> naissance[,<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">7</span><span class="sc">:</span><span class="dv">10</span>)]</span>
<span id="cb131-412"><a href="#cb131-412" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nais2)</span>
<span id="cb131-413"><a href="#cb131-413" aria-hidden="true" tabindex="-1"></a>nais_fus1 <span class="ot">&lt;-</span> <span class="fu">merge</span>(nais1, nais2)</span>
<span id="cb131-414"><a href="#cb131-414" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nais_fus1)</span>
<span id="cb131-415"><a href="#cb131-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-416"><a href="#cb131-416" aria-hidden="true" tabindex="-1"></a><span class="co"># Ici, vu que les individus sont dans le même ordre on aurait pu utiliser la fonction cbind(), et la colonne ID n'est pas utile :</span></span>
<span id="cb131-417"><a href="#cb131-417" aria-hidden="true" tabindex="-1"></a>nais_fus2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(nais1, nais2[, <span class="sc">-</span><span class="dv">1</span>])</span>
<span id="cb131-418"><a href="#cb131-418" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nais_fus2)</span>
<span id="cb131-419"><a href="#cb131-419" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(nais_fus1, nais_fus2)</span>
<span id="cb131-420"><a href="#cb131-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-421"><a href="#cb131-421" aria-hidden="true" tabindex="-1"></a><span class="co"># Les deux dataframes ne sont pas identitiques, car merge a classé par ordre croissant suivant la variable de regroupement ID, mais les informations sont les mêmes.</span></span>
<span id="cb131-422"><a href="#cb131-422" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-423"><a href="#cb131-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-424"><a href="#cb131-424" aria-hidden="true" tabindex="-1"></a>On peut également fusionner deux tableaux de données où les individus</span>
<span id="cb131-425"><a href="#cb131-425" aria-hidden="true" tabindex="-1"></a>(qui doivent être les mêmes) ne sont pas dans le même ordre :</span>
<span id="cb131-426"><a href="#cb131-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-427"><a href="#cb131-427" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-428"><a href="#cb131-428" aria-hidden="true" tabindex="-1"></a>desordre <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(naissance), <span class="fu">nrow</span>(naissance))</span>
<span id="cb131-429"><a href="#cb131-429" aria-hidden="true" tabindex="-1"></a>nais3 <span class="ot">&lt;-</span> naissance[desordre, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">7</span><span class="sc">:</span><span class="dv">10</span>)]</span>
<span id="cb131-430"><a href="#cb131-430" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nais3)</span>
<span id="cb131-431"><a href="#cb131-431" aria-hidden="true" tabindex="-1"></a>nais_fus3 <span class="ot">&lt;-</span> <span class="fu">merge</span>(nais1, nais3)</span>
<span id="cb131-432"><a href="#cb131-432" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nais_fus3)</span>
<span id="cb131-433"><a href="#cb131-433" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(nais_fus1, nais_fus3)</span>
<span id="cb131-434"><a href="#cb131-434" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-435"><a href="#cb131-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-436"><a href="#cb131-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-437"><a href="#cb131-437" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exercice 7 : join</span></span>
<span id="cb131-438"><a href="#cb131-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-439"><a href="#cb131-439" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Consulter l'aide de <span class="in">`dplyr::sample_n`</span> et trouver un moyens simple de permuter</span>
<span id="cb131-440"><a href="#cb131-440" aria-hidden="true" tabindex="-1"></a>les lignes du jeu de données.</span>
<span id="cb131-441"><a href="#cb131-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-444"><a href="#cb131-444" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-445"><a href="#cb131-445" aria-hidden="true" tabindex="-1"></a>naissance_perm <span class="ot">&lt;-</span> <span class="fu">sample_n</span>(naissance, <span class="at">size =</span> <span class="fu">nrow</span>(naissance))</span>
<span id="cb131-446"><a href="#cb131-446" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(naissance_perm))</span>
<span id="cb131-447"><a href="#cb131-447" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(naissance))</span>
<span id="cb131-448"><a href="#cb131-448" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-449"><a href="#cb131-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-450"><a href="#cb131-450" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Consulter l'aide de <span class="in">`dplyr::join()`</span> (pour plus d'informations sur les fusions</span>
<span id="cb131-451"><a href="#cb131-451" aria-hidden="true" tabindex="-1"></a>avec <span class="in">`dplyr`</span> consulter cette <span class="co">[</span><span class="ot">page</span><span class="co">](https://cran.rstudio.com/web/packages/dplyr/vignettes/two-table.html)</span>),</span>
<span id="cb131-452"><a href="#cb131-452" aria-hidden="true" tabindex="-1"></a>puis utiliser la fonction <span class="in">`dplyr::left_join()`</span> pour fusionner les tables <span class="in">`nais1`</span></span>
<span id="cb131-453"><a href="#cb131-453" aria-hidden="true" tabindex="-1"></a>et <span class="in">`nais3`</span>.</span>
<span id="cb131-454"><a href="#cb131-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-457"><a href="#cb131-457" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-458"><a href="#cb131-458" aria-hidden="true" tabindex="-1"></a>nais_joined <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">left_join</span>(nais1, nais3, <span class="at">by=</span><span class="st">"ID"</span>)</span>
<span id="cb131-459"><a href="#cb131-459" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(nais_joined))</span>
<span id="cb131-460"><a href="#cb131-460" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-461"><a href="#cb131-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-462"><a href="#cb131-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-463"><a href="#cb131-463" aria-hidden="true" tabindex="-1"></a><span class="fu">### Trier un tableau de données le long d'une colonne</span></span>
<span id="cb131-464"><a href="#cb131-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-465"><a href="#cb131-465" aria-hidden="true" tabindex="-1"></a>Pour trier le tableau suivant la variable <span class="in">`ID`</span> par ordre croissant, on utilise la fonction <span class="in">`order()`</span> :</span>
<span id="cb131-466"><a href="#cb131-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-467"><a href="#cb131-467" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-468"><a href="#cb131-468" aria-hidden="true" tabindex="-1"></a>nais_orderID <span class="ot">&lt;-</span> naissance[<span class="fu">order</span>(naissance<span class="sc">$</span>ID), ]</span>
<span id="cb131-469"><a href="#cb131-469" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(nais_orderID))</span>
<span id="cb131-470"><a href="#cb131-470" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-471"><a href="#cb131-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-472"><a href="#cb131-472" aria-hidden="true" tabindex="-1"></a>Maintenant, si on veut trier le tableau suivant l'âge par ordre décroissant :</span>
<span id="cb131-473"><a href="#cb131-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-474"><a href="#cb131-474" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-475"><a href="#cb131-475" aria-hidden="true" tabindex="-1"></a>nais_decAGE <span class="ot">&lt;-</span> naissance[<span class="fu">order</span>(naissance<span class="sc">$</span>AGE, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ]</span>
<span id="cb131-476"><a href="#cb131-476" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(nais_decAGE[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ])</span>
<span id="cb131-477"><a href="#cb131-477" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-478"><a href="#cb131-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-479"><a href="#cb131-479" aria-hidden="true" tabindex="-1"></a>On remarque qu'il y a des ex-aequo. On peut rajouter une variable sur laquelle trier les ex-aequo, en deuxième argument de <span class="in">`order()`</span> :</span>
<span id="cb131-480"><a href="#cb131-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-481"><a href="#cb131-481" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-482"><a href="#cb131-482" aria-hidden="true" tabindex="-1"></a>nais_decAGE_decLWT <span class="ot">&lt;-</span> naissance[<span class="fu">order</span>(naissance<span class="sc">$</span>AGE, naissance<span class="sc">$</span>LWT, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ]</span>
<span id="cb131-483"><a href="#cb131-483" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(nais_decAGE_decLWT[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ])</span>
<span id="cb131-484"><a href="#cb131-484" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-485"><a href="#cb131-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-486"><a href="#cb131-486" aria-hidden="true" tabindex="-1"></a>Enfin, si on veut que le classement soit fait de façon croissante sur <span class="in">`LWT`</span>, on peut procéder de la façon suivante :</span>
<span id="cb131-487"><a href="#cb131-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-488"><a href="#cb131-488" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-489"><a href="#cb131-489" aria-hidden="true" tabindex="-1"></a>nais_decAGE_LWT <span class="ot">&lt;-</span> naissance[<span class="fu">order</span>(naissance<span class="sc">$</span>AGE, <span class="sc">-</span>naissance<span class="sc">$</span>LWT, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ]</span>
<span id="cb131-490"><a href="#cb131-490" aria-hidden="true" tabindex="-1"></a>nais_decAGE_LWT[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ]</span>
<span id="cb131-491"><a href="#cb131-491" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-492"><a href="#cb131-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-493"><a href="#cb131-493" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exercice 8 : `dplyr::arrange()`</span></span>
<span id="cb131-494"><a href="#cb131-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-495"><a href="#cb131-495" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Utiliser la fonction <span class="in">`dplyr::arrange()`</span> pour reproduire les tris précédents.</span>
<span id="cb131-496"><a href="#cb131-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-497"><a href="#cb131-497" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Trier le dataframe suivant la variable <span class="in">`SMOKE`</span> (qui est un facteur). Comment R choisit-il pour déterminer quelle modalité du facteur va apparaître en premier ?</span>
<span id="cb131-498"><a href="#cb131-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-499"><a href="#cb131-499" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Rajouter une variable, nommée <span class="in">`lettre`</span> au dataframe, contenant des lettres majuscules choisies alétoirement. On peut utiliser <span class="in">`sample(letters, nrow(naissance), replace = TRUE)`</span> pour générer ce tirage aléatoire.</span>
<span id="cb131-500"><a href="#cb131-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-501"><a href="#cb131-501" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Trier le dataframe suivant la nouvelle variable <span class="in">`lettre`</span>.</span>
<span id="cb131-502"><a href="#cb131-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-503"><a href="#cb131-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-504"><a href="#cb131-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-505"><a href="#cb131-505" aria-hidden="true" tabindex="-1"></a><span class="fu">### La classe `tlb`</span></span>
<span id="cb131-506"><a href="#cb131-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-507"><a href="#cb131-507" aria-hidden="true" tabindex="-1"></a>Le package s'appuie sur une nouvelle classe d'objets : <span class="in">`tbl`</span>. </span>
<span id="cb131-508"><a href="#cb131-508" aria-hidden="true" tabindex="-1"></a>Le résultat affiché lorsqu'on tape le nom du tableau est tronqué </span>
<span id="cb131-509"><a href="#cb131-509" aria-hidden="true" tabindex="-1"></a>pour cette nouvelle classe :</span>
<span id="cb131-510"><a href="#cb131-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-511"><a href="#cb131-511" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-512"><a href="#cb131-512" aria-hidden="true" tabindex="-1"></a>nais <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(naissance)</span>
<span id="cb131-513"><a href="#cb131-513" aria-hidden="true" tabindex="-1"></a>nais</span>
<span id="cb131-514"><a href="#cb131-514" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(nais)</span>
<span id="cb131-515"><a href="#cb131-515" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-516"><a href="#cb131-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-517"><a href="#cb131-517" aria-hidden="true" tabindex="-1"></a>De plus, le comportement de la sélection de colonne est changé : on garde la</span>
<span id="cb131-518"><a href="#cb131-518" aria-hidden="true" tabindex="-1"></a>structure de tableau de données même lorsqu'on sélectionne une seule colonne :</span>
<span id="cb131-519"><a href="#cb131-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-520"><a href="#cb131-520" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=TRUE}</span></span>
<span id="cb131-521"><a href="#cb131-521" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(naissance[, <span class="dv">2</span>])</span>
<span id="cb131-522"><a href="#cb131-522" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(nais[, <span class="dv">2</span>])</span>
<span id="cb131-523"><a href="#cb131-523" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-524"><a href="#cb131-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-525"><a href="#cb131-525" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exercice 9 : `dplyr::arrange()`</span></span>
<span id="cb131-526"><a href="#cb131-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-527"><a href="#cb131-527" aria-hidden="true" tabindex="-1"></a><span class="ss"> 1. </span>Utiliser la fonction<span class="in">`dplyr::arrange()`</span> pour ordonner le tableau de données naissance par age, avec les poids de naissance par ordre décroissant pour les égalités.</span>
<span id="cb131-528"><a href="#cb131-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-531"><a href="#cb131-531" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-532"><a href="#cb131-532" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(naissance, AGE, <span class="fu">desc</span>(BWT))</span>
<span id="cb131-533"><a href="#cb131-533" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-534"><a href="#cb131-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-535"><a href="#cb131-535" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction au pipe `%&gt;%`</span></span>
<span id="cb131-536"><a href="#cb131-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-537"><a href="#cb131-537" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exercice 10</span></span>
<span id="cb131-538"><a href="#cb131-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-539"><a href="#cb131-539" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>À l'aide des fonctions <span class="in">`dplyr::group_by()`</span>, <span class="in">`dplyr::summarize()`</span>, <span class="in">`dplyr::n()`</span>, <span class="in">`dplyr::filter()`</span> et <span class="in">`dplyr::arrange()`</span>, construire le tableau de données donnant le poids moyen à la naissance par âge stratifié sur le statut tabagique, ainsi que le nombre d'observations correpondantes, et ordonné le résultat par ordre de poids moyen croissant en ne sélectionnant que les catéories pour lesquelles le poids moyen est inférieur à 2,5kg.</span>
<span id="cb131-542"><a href="#cb131-542" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-543"><a href="#cb131-543" aria-hidden="true" tabindex="-1"></a>naissance_exo10 <span class="ot">&lt;-</span> <span class="fu">group_by</span>(naissance, AGE, SMOKE)</span>
<span id="cb131-544"><a href="#cb131-544" aria-hidden="true" tabindex="-1"></a>naissance_exo10 <span class="ot">&lt;-</span> <span class="fu">summarise</span>(naissance_exo10,</span>
<span id="cb131-545"><a href="#cb131-545" aria-hidden="true" tabindex="-1"></a>  <span class="at">poids_moy =</span> <span class="fu">mean</span>(BWT, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb131-546"><a href="#cb131-546" aria-hidden="true" tabindex="-1"></a>naissance_exo10 <span class="ot">&lt;-</span> <span class="fu">filter</span>(naissance_exo10, poids_moy <span class="sc">&lt;</span> <span class="dv">2500</span>)</span>
<span id="cb131-547"><a href="#cb131-547" aria-hidden="true" tabindex="-1"></a>naissance_exo10 <span class="ot">&lt;-</span> <span class="fu">arrange</span>(naissance_exo10, poids_moy)</span>
<span id="cb131-548"><a href="#cb131-548" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(naissance_exo10)</span>
<span id="cb131-549"><a href="#cb131-549" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-550"><a href="#cb131-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-551"><a href="#cb131-551" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Réécrire le code de la réponse précédente à l'aide de l'opérateur <span class="in">`%&gt;%`</span></span>
<span id="cb131-554"><a href="#cb131-554" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb131-555"><a href="#cb131-555" aria-hidden="true" tabindex="-1"></a>naissance_exo10_pipe <span class="ot">&lt;-</span> naissance <span class="sc">%&gt;%</span> </span>
<span id="cb131-556"><a href="#cb131-556" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(AGE, SMOKE) <span class="sc">%&gt;%</span> </span>
<span id="cb131-557"><a href="#cb131-557" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">poids_moy =</span> <span class="fu">mean</span>(BWT, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb131-558"><a href="#cb131-558" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb131-559"><a href="#cb131-559" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(poids_moy <span class="sc">&lt;</span> <span class="dv">2500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb131-560"><a href="#cb131-560" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(poids_moy)</span>
<span id="cb131-561"><a href="#cb131-561" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(naissance_exo10_pipe)</span>
<span id="cb131-562"><a href="#cb131-562" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb131-563"><a href="#cb131-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-564"><a href="#cb131-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-565"><a href="#cb131-565" aria-hidden="true" tabindex="-1"></a><span class="fu"># Résumé</span></span>
<span id="cb131-566"><a href="#cb131-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-567"><a href="#cb131-567" aria-hidden="true" tabindex="-1"></a>Le package <span class="in">`dplyr`</span> propose un ensemble de fonctions très simples à utiliser</span>
<span id="cb131-568"><a href="#cb131-568" aria-hidden="true" tabindex="-1"></a>et permettant de réaliser toutes les opérations classiques sur les tableaux</span>
<span id="cb131-569"><a href="#cb131-569" aria-hidden="true" tabindex="-1"></a>de données, avec une syntaxe très claire et compréhensible.</span>
<span id="cb131-570"><a href="#cb131-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-571"><a href="#cb131-571" aria-hidden="true" tabindex="-1"></a>Pour aller plus loin, ou voir d'autres exemples, consulter cette</span>
<span id="cb131-572"><a href="#cb131-572" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">page</span><span class="co">](https://cran.rstudio.com/web/packages/dplyr/vignettes/dplyr.html)</span>.</span>
<span id="cb131-573"><a href="#cb131-573" aria-hidden="true" tabindex="-1"></a>On renverra également vers cet </span>
<span id="cb131-574"><a href="#cb131-574" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">aide-mémoire</span><span class="co">](https://www.rstudio.com/wp-content/uploads/2016/01/data-wrangling-french.pdf)</span>.</span>
<span id="cb131-575"><a href="#cb131-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-576"><a href="#cb131-576" aria-hidden="true" tabindex="-1"></a>En dehors du changement de syntaxe, les gains en temps de calcul sont souvent significatifs avec <span class="in">`dplyr`</span>.</span>
<span id="cb131-577"><a href="#cb131-577" aria-hidden="true" tabindex="-1"></a>Il existe un autre package populaire pour faire des manipulations sur les</span>
<span id="cb131-578"><a href="#cb131-578" aria-hidden="true" tabindex="-1"></a>(grands) jeux de données : <span class="in">`data.table`</span>. La syntaxe est un peu moins intuitive</span>
<span id="cb131-579"><a href="#cb131-579" aria-hidden="true" tabindex="-1"></a>que <span class="in">`dplyr`</span>, mais l'efficacité est encore accrue.</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>